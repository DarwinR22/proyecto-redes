{
  "version": 4,
  "terraform_version": "1.11.4",
  "serial": 1241,
  "lineage": "2f9759b4-ed16-78c6-b468-fe8b8fbda90d",
  "outputs": {
    "domain_controller_instance_id": {
      "value": "i-07a58773a18817bad",
      "type": "string"
    },
    "domain_controller_private_ip": {
      "value": "10.0.1.145",
      "type": "string"
    },
    "domain_controller_public_ip": {
      "value": "54.87.39.235",
      "type": "string"
    },
    "ids_instance_id": {
      "value": "i-0fce0be92222a58c7",
      "type": "string"
    },
    "ids_public_ip": {
      "value": "3.92.79.119",
      "type": "string"
    },
    "static_site_url": {
      "value": "http://redes-static-site-c1c80cb4.s3-website-us-east-1.amazonaws.com",
      "type": "string"
    },
    "vns3_private_ip": {
      "value": "10.0.1.53",
      "type": "string"
    },
    "vns3_public_ip": {
      "value": "13.220.133.157",
      "type": "string"
    },
    "web_server_instance_id": {
      "value": "i-03c58f937370c9972",
      "type": "string"
    },
    "web_server_public_ip": {
      "value": "54.163.9.95",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "random_id",
      "name": "suffix",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "b64_std": "wcgMtA==",
            "b64_url": "wcgMtA",
            "byte_length": 4,
            "dec": "3251113140",
            "hex": "c1c80cb4",
            "id": "wcgMtA",
            "keepers": null,
            "prefix": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.domain_controller",
      "mode": "managed",
      "type": "aws_instance",
      "name": "windows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-069c83816748ce7d5",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-07a58773a18817bad",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 2,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 2,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-07a58773a18817bad",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t2.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-01c64cc4bbd181557",
            "private_dns": "ip-10-0-1-145.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.145",
            "public_dns": "ec2-54-87-39-235.compute-1.amazonaws.com",
            "public_ip": "54.87.39.235",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 0,
                "volume_id": "vol-0a45988ec414b4aa6",
                "volume_size": 30,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-016c2af89368c1ac8",
            "tags": {
              "Name": "windows-domain-controller",
              "Owner": "tu_nombre",
              "Project": "redes1705",
              "Role": "AD-Server"
            },
            "tags_all": {
              "Name": "windows-domain-controller",
              "Owner": "tu_nombre",
              "Project": "redes1705",
              "Role": "AD-Server"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": null,
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-05ec66b08096d31b0"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.domain_controller.aws_security_group.win_sg",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.domain_controller",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "win_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-05ec66b08096d31b0",
            "description": "Permite RDP y LDAP desde red privada",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-05ec66b08096d31b0",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "RDP Access",
                "from_port": 3389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3389
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "LDAP desde red privada",
                "from_port": 389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 389
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "Ping (ICMP)",
                "from_port": -1,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "icmp",
                "security_groups": [],
                "self": false,
                "to_port": -1
              }
            ],
            "name": "win-domain-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "win-domain-sg"
            },
            "tags_all": {
              "Name": "win-domain-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ids",
      "mode": "managed",
      "type": "aws_instance",
      "name": "ids",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-053b0d53c279acc90",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-0fce0be92222a58c7",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0fce0be92222a58c7",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0a54c95beeefde189",
            "private_dns": "ip-10-0-1-183.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.183",
            "public_dns": "ec2-3-92-79-119.compute-1.amazonaws.com",
            "public_ip": "3.92.79.119",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 0,
                "volume_id": "vol-05a65b6d6cad292d2",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-016c2af89368c1ac8",
            "tags": {
              "Name": "ids-server",
              "Owner": "tu_nombre",
              "Project": "seguridad-redes"
            },
            "tags_all": {
              "Name": "ids-server",
              "Owner": "tu_nombre",
              "Project": "seguridad-redes"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "2edaedad52658179a6a7ba813b06bf8d90a24260",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0eb4af62ae45daf6c"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.ids.aws_security_group.ids_sg",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ids",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ids_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-0eb4af62ae45daf6c",
            "description": "Acceso SSH para IDS/IPS",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0eb4af62ae45daf6c",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "SSH",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              }
            ],
            "name": "ids-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "ids-sg"
            },
            "tags_all": {
              "Name": "ids-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "igw",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:internet-gateway/igw-0f5c97788443bd535",
            "id": "igw-0f5c97788443bd535",
            "owner_id": "809420506439",
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public_rt",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:route-table/rtb-0d70209ad068b33bd",
            "id": "rtb-0d70209ad068b33bd",
            "owner_id": "809420506439",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-0f5c97788443bd535",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "public-rt"
            },
            "tags_all": {
              "Name": "public-rt"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_internet_gateway.igw",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "public_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-07c7891ef6f578ffe",
            "route_table_id": "rtb-0d70209ad068b33bd",
            "subnet_id": "subnet-016c2af89368c1ac8",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_internet_gateway.igw",
            "module.networking.aws_route_table.public_rt",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:subnet/subnet-09e8478f08eb8d0ec",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az4",
            "cidr_block": "10.0.2.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-09e8478f08eb8d0ec",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "809420506439",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "Name": "private-subnet"
            },
            "tags_all": {
              "Name": "private-subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:subnet/subnet-016c2af89368c1ac8",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az4",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-016c2af89368c1ac8",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "809420506439",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "Name": "public-subnet"
            },
            "tags_all": {
              "Name": "public-subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::redes-static-site-c1c80cb4",
            "bucket": "redes-static-site-c1c80cb4",
            "bucket_domain_name": "redes-static-site-c1c80cb4.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "redes-static-site-c1c80cb4.s3.us-east-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "f2185834d6192d28013c48cdcd20d01224dbf74972ac495ef87e076295e5188a",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "redes-static-site-c1c80cb4",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:s3:::redes-static-site-c1c80cb4/*\"}],\"Version\":\"2012-10-17\"}",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Environment": "Dev",
              "Name": "StaticSiteBucket"
            },
            "tags_all": {
              "Environment": "Dev",
              "Name": "StaticSiteBucket"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [
              {
                "error_document": "error.html",
                "index_document": "index.html",
                "redirect_all_requests_to": "",
                "routing_rules": ""
              }
            ],
            "website_domain": "s3-website-us-east-1.amazonaws.com",
            "website_endpoint": "redes-static-site-c1c80cb4.s3-website-us-east-1.amazonaws.com"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "allow_public_read",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "redes-static-site-c1c80cb4",
            "id": "redes-static-site-c1c80cb4",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::redes-static-site-c1c80cb4/*\"]}],\"Version\":\"2012-10-17\"}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": false,
            "block_public_policy": false,
            "bucket": "redes-static-site-c1c80cb4",
            "id": "redes-static-site-c1c80cb4",
            "ignore_public_acls": false,
            "restrict_public_buckets": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_website_configuration",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "redes-static-site-c1c80cb4",
            "error_document": [
              {
                "key": "error.html"
              }
            ],
            "expected_bucket_owner": "",
            "id": "redes-static-site-c1c80cb4",
            "index_document": [
              {
                "suffix": "index.html"
              }
            ],
            "redirect_all_requests_to": [],
            "routing_rule": [],
            "routing_rules": "",
            "website_domain": "s3-website-us-east-1.amazonaws.com",
            "website_endpoint": "redes-static-site-c1c80cb4.s3-website-us-east-1.amazonaws.com"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "index",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": null,
            "arn": "arn:aws:s3:::redes-static-site-c1c80cb4/index.html",
            "bucket": "redes-static-site-c1c80cb4",
            "bucket_key_enabled": false,
            "cache_control": "",
            "checksum_algorithm": null,
            "checksum_crc32": "",
            "checksum_crc32c": "",
            "checksum_crc64nvme": "",
            "checksum_sha1": "",
            "checksum_sha256": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "text/html",
            "etag": "52dc975e81106f53993d8fa0bc832900",
            "force_destroy": false,
            "id": "index.html",
            "key": "index.html",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "override_provider": [],
            "server_side_encryption": "AES256",
            "source": "modules/s3_static_site/index.html",
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": {},
            "tags_all": {},
            "version_id": "",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:vpc/vpc-0ff8a07940cf493db",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-0892e14a43359b2bf",
            "default_route_table_id": "rtb-0907c68e8a9d60c1a",
            "default_security_group_id": "sg-01626e93dc9e3a201",
            "dhcp_options_id": "dopt-08203139ad7cafbe4",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "id": "vpc-0ff8a07940cf493db",
            "instance_tenancy": "default",
            "ipv4_ipam_pool_id": null,
            "ipv4_netmask_length": null,
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_network_border_group": "",
            "ipv6_ipam_pool_id": "",
            "ipv6_netmask_length": 0,
            "main_route_table_id": "rtb-0907c68e8a9d60c1a",
            "owner_id": "809420506439",
            "tags": {
              "Name": "secure-vpc"
            },
            "tags_all": {
              "Name": "secure-vpc"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.vpn",
      "mode": "managed",
      "type": "aws_instance",
      "name": "vns3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-01a93fd5fe4058a3d",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-03598c75ed4ef3756",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-03598c75ed4ef3756",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-032f1896e200f55fc",
            "private_dns": "ip-10-0-1-53.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.53",
            "public_dns": "ec2-13-220-133-157.compute-1.amazonaws.com",
            "public_ip": "13.220.133.157",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 0,
                "volume_id": "vol-056a95265797c620e",
                "volume_size": 30,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-016c2af89368c1ac8",
            "tags": {
              "Name": "vns3-server",
              "Owner": "Darwin Lopez",
              "Project": "seguridad-redes",
              "Role": "vpn-firewall"
            },
            "tags_all": {
              "Name": "vns3-server",
              "Owner": "Darwin Lopez",
              "Project": "seguridad-redes",
              "Role": "vpn-firewall"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "b0aee3e633baf5543a8c9dc249831a96af24e544",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0505175a8ac059443"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this",
            "module.vpn.aws_security_group.vns3_sg"
          ]
        }
      ]
    },
    {
      "module": "module.vpn",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "vns3_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-0505175a8ac059443",
            "description": "Permitir acceso a VNS3 (TCP 8000) y SSH",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0505175a8ac059443",
            "ingress": [
              {
                "cidr_blocks": [
                  "190.14.138.179/32"
                ],
                "description": "Acceso SSH",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "190.14.138.179/32"
                ],
                "description": "VNS3 Web UI",
                "from_port": 8000,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 8000
              }
            ],
            "name": "vns3-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "vns3-sg"
            },
            "tags_all": {
              "Name": "vns3-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.web_server",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "6c616ebb40ca5e27c4e17d17aaf3430020aa5faf1f27423def4f2b4c848e337b",
            "rendered": "#!/bin/bash\nyum update -y\nyum install -y httpd mod_ssl\n\n# Instalar Node.js y npm (versión 18 LTS)\ncurl -sL https://rpm.nodesource.com/setup_18.x | bash -\nyum install -y nodejs git\n\n# Activar y asegurar Apache\ncat \u003c\u003cEOF \u003e\u003e /etc/httpd/conf/httpd.conf\n\u003cDirectory /var/www/html\u003e\n    Options -Indexes\n\u003c/Directory\u003e\n\nHeader always set X-Frame-Options \"DENY\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nEOF\n\nsystemctl enable httpd\nsystemctl start httpd\n\n# Crear estructura de carpetas\nmkdir -p /var/www/html/css\nmkdir -p /var/www/html/js\nmkdir -p /var/www/api\n\n# Copiar frontend\necho \"PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KCTx0aXRsZT5TbGlkZSBOYXZiYXI8L3RpdGxlPg0KCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9zdHlsZS5jc3MiPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Kb3N0OndnaHRANTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCjwvaGVhZD4NCjxib2R5Pg0KCTxkaXYgY2xhc3M9Im1haW4iPiAgCQ0KCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjaGsiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCg0KCQkJPGRpdiBjbGFzcz0ic2lnbnVwIj4NCgkJCQk8Zm9ybT4NCgkJCQkJPGxhYmVsIGZvcj0iY2hrIiBhcmlhLWhpZGRlbj0idHJ1ZSI+U2lnbiB1cDwvbGFiZWw+DQoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2lnbnVwLXVzZXJuYW1lIiBwbGFjZWhvbGRlcj0iVXNlcm5hbWUiIHJlcXVpcmVkPg0KCQkJCQk8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJicm9qIiBwbGFjZWhvbGRlcj0iQnJvalRlbGVmb25hIiByZXF1aXJlZD0iIj4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwc3dkIiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiIHJlcXVpcmVkPSIiPg0KCQkJCQk8YnV0dG9uPlNpZ24gdXA8L2J1dHRvbj4NCgkJCQk8L2Zvcm0+DQoJCQk8L2Rpdj4NCg0KCQkJPGRpdiBjbGFzcz0ibG9naW4iPg0KCQkJCTxmb3JtIGlkPSJsb2dpbi1mb3JtIiBvbnN1Ym1pdD0icmV0dXJuIGZhbHNlOyI+DQoJCQkJCTxsYWJlbCBmb3I9ImNoayIgYXJpYS1oaWRkZW49InRydWUiPkxvZ2luPC9sYWJlbD4NCgkJCQkJPGlucHV0IHR5cGU9InRleHQiIGlkPSJsb2dpbi11c2VybmFtZSIgcGxhY2Vob2xkZXI9IlVzZXJuYW1lIiByZXF1aXJlZD4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBpZD0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJQYXNzd29yZCIgcmVxdWlyZWQ+DQoJCQkJCTxidXR0b24gdHlwZT0ic3VibWl0Ij5Mb2dpbjwvYnV0dG9uPg0KCQkJCQk8ZGl2IGlkPSJlcnJvci1tZXNzYWdlIj48L2Rpdj4NCgkJCQk8L2Zvcm0+DQoJCQkgIDwvZGl2Pg0KCQkJICANCgk8L2Rpdj4NCgk8c2NyaXB0IHNyYz0ianMvbG9naW4uanMiPjwvc2NyaXB0Pg0KDQo8L2JvZHk+DQo8L2h0bWw+\" | base64 -d \u003e /var/www/html/index.html\necho \"PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiIC8+DQogIDx0aXRsZT5Ib21lPC90aXRsZT4NCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3Mvc3R5bGUuY3NzIiAvPg0KPC9oZWFkPg0KPGJvZHk+DQogIDxkaXYgY2xhc3M9ImhvbWUtY29udGFpbmVyIj4NCiAgICA8aDE+QmllbnZlbmlkbzwvaDE+DQogICAgPHA+SGFzIGluaWNpYWRvIHNlc2nDs24gZXhpdG9zYW1lbnRlLjwvcD4NCiAgPC9kaXY+DQo8L2JvZHk+DQo8L2h0bWw+DQo=\"  | base64 -d \u003e /var/www/html/home.html\necho \"Ym9keXsNCgltYXJnaW46IDA7DQoJcGFkZGluZzogMDsNCglkaXNwbGF5OiBmbGV4Ow0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWFsaWduLWl0ZW1zOiBjZW50ZXI7DQoJbWluLWhlaWdodDogMTAwdmg7DQoJZm9udC1mYW1pbHk6ICdKb3N0Jywgc2Fucy1zZXJpZjsNCgliYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMGYwYzI5LCAjMzAyYjYzLCAjMjQyNDNlKTsNCn0NCi5tYWluew0KCXdpZHRoOiAzNTBweDsNCgloZWlnaHQ6IDUwMHB4Ow0KCWJhY2tncm91bmQ6IHJlZDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCWJhY2tncm91bmQ6IHVybCgiaHR0cHM6Ly9kb2MtMDgtMmMtZG9jcy5nb29nbGV1c2VyY29udGVudC5jb20vZG9jcy9zZWN1cmVzYy82OGM5MHNtaWdsaWhuZzk1MzRtdnFtcTE5NDZkbWlzNS9mbzBwaWNzcDFuaGl1Y21jMGwyNXMyOXJlc3BncHI0ai8xNjMxNTI0Mjc1MDAwLzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzFTeDBqaGRwRXBuTkl5ZFM0cm5ONGtIU0p0VTFFeVdrYT9lPXZpZXcmYXV0aHVzZXI9MCZub25jZT1nY3JvY2VwZ2JiMTdtJnVzZXI9MDM1MjIzNjA5NjA5MjIyOTgzNzQmaGFzaD10ZmhnYnM4NmthNmRpdm8zbGxidnA5M21nNGNzdmIzOCIpIG5vLXJlcGVhdCBjZW50ZXIvIGNvdmVyOw0KCWJvcmRlci1yYWRpdXM6IDEwcHg7DQoJYm94LXNoYWRvdzogNXB4IDIwcHggNTBweCAjMDAwOw0KfQ0KI2Noa3sNCglkaXNwbGF5OiBub25lOw0KfQ0KLnNpZ251cHsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJd2lkdGg6MTAwJTsNCgloZWlnaHQ6IDEwMCU7DQp9DQpsYWJlbHsNCgljb2xvcjogI2ZmZjsNCglmb250LXNpemU6IDIuM2VtOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiA1MHB4Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCWN1cnNvcjogcG9pbnRlcjsNCgl0cmFuc2l0aW9uOiAuNXMgZWFzZS1pbi1vdXQ7DQp9DQppbnB1dHsNCgl3aWR0aDogNjAlOw0KCWhlaWdodDogMTBweDsNCgliYWNrZ3JvdW5kOiAjZTBkZWRlOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiAyMHB4IGF1dG87DQoJcGFkZGluZzogMTJweDsNCglib3JkZXI6IG5vbmU7DQoJb3V0bGluZTogbm9uZTsNCglib3JkZXItcmFkaXVzOiA1cHg7DQp9DQpidXR0b257DQoJd2lkdGg6IDYwJTsNCgloZWlnaHQ6IDQwcHg7DQoJbWFyZ2luOiAxMHB4IGF1dG87DQoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoJZGlzcGxheTogYmxvY2s7DQoJY29sb3I6ICNmZmY7DQoJYmFja2dyb3VuZDogIzU3M2I4YTsNCglmb250LXNpemU6IDFlbTsNCglmb250LXdlaWdodDogYm9sZDsNCgltYXJnaW4tdG9wOiAzMHB4Ow0KCW91dGxpbmU6IG5vbmU7DQoJYm9yZGVyOiBub25lOw0KCWJvcmRlci1yYWRpdXM6IDVweDsNCgl0cmFuc2l0aW9uOiAuMnMgZWFzZS1pbjsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQpidXR0b246aG92ZXJ7DQoJYmFja2dyb3VuZDogIzZkNDRiODsNCn0NCi5sb2dpbnsNCgloZWlnaHQ6IDQ2MHB4Ow0KCWJhY2tncm91bmQ6ICNlZWU7DQoJYm9yZGVyLXJhZGl1czogNjAlIC8gMTAlOw0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTgwcHgpOw0KCXRyYW5zaXRpb246IC44cyBlYXNlLWluLW91dDsNCn0NCi5sb2dpbiBsYWJlbHsNCgljb2xvcjogIzU3M2I4YTsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg0KI2NoazpjaGVja2VkIH4gLmxvZ2luew0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAwcHgpOw0KfQ0KI2NoazpjaGVja2VkIH4gLmxvZ2luIGxhYmVsew0KCXRyYW5zZm9ybTogc2NhbGUoMSk7CQ0KfQ0KI2NoazpjaGVja2VkIH4gLnNpZ251cCBsYWJlbHsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg==\"  | base64 -d \u003e /var/www/html/css/style.css\necho \"ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgZG9jdW1lbnQNCiAgICAuZ2V0RWxlbWVudEJ5SWQoImxvZ2luLWZvcm0iKQ0KICAgIC5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBhc3luYyBmdW5jdGlvbiAoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KDQogICAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbi11c2VybmFtZSIpLnZhbHVlOw0KICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFzc3dvcmQiKS52YWx1ZTsNCg0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgNCiAgICAgICAgICBgaHR0cDovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTozMDAwL2FwaS9sb2dpbmAsDQogICAgICAgICAgew0KICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pLA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7DQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaG9tZS5odG1sIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAgICJDcmVkZW5jaWFsZXMgaW5jb3JyZWN0YXMuIjsNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6IiwgZXJyb3IpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAiRXJyb3IgYWwgY29uZWN0YXIgY29uIGVsIHNlcnZpZG9yLiI7DQogICAgICB9DQogICAgfSk7DQp9KTsNCg==\"   | base64 -d \u003e /var/www/html/js/login.js\n\n# Copiar backend\necho \"Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoImV4cHJlc3MiKTsNCmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCJib2R5LXBhcnNlciIpOw0KY29uc3QgY29ycyA9IHJlcXVpcmUoImNvcnMiKTsNCmNvbnN0IGxkYXAgPSByZXF1aXJlKCJsZGFwanMiKTsNCg0KY29uc3QgYXBwID0gZXhwcmVzcygpOw0KY29uc3QgcG9ydCA9IDMwMDA7DQoNCi8vIE1pZGRsZXdhcmUNCmFwcC51c2UoY29ycygpKTsNCmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpOw0KDQovLyBDb25maWd1cmFjacOzbiBMREFQIGNvbiBJUCBwcml2YWRhIGRlbCBBRA0KY29uc3QgbGRhcE9wdGlvbnMgPSB7DQogIHVybDogImxkYXA6Ly8xMC4wLjEuMTQ1IiwgLy8g4pyFIElQIHByaXZhZGEgcmVhbCBkZWwgc2Vydmlkb3IgQUQNCiAgcmVjb25uZWN0OiB0cnVlLA0KfTsNCg0KYXBwLnBvc3QoIi9hcGkvbG9naW4iLCBhc3luYyAocmVxLCByZXMpID0+IHsNCiAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5Ow0KDQogIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkKSB7DQogICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsNCiAgICAgIHN1Y2Nlc3M6IGZhbHNlLA0KICAgICAgbWVzc2FnZTogIkRhdG9zIGluY29tcGxldG9zIiwNCiAgICB9KTsNCiAgfQ0KDQogIGNvbnN0IGNsaWVudCA9IGxkYXAuY3JlYXRlQ2xpZW50KGxkYXBPcHRpb25zKTsNCg0KICAvLyBBcm1hZG8gZGVsIEROIGNvcnJlY3RvIChzZWfDum4gdHUgZXN0cnVjdHVyYSBlbiBBRCkNCiAgY29uc3QgdXNlckROID0gYENOPSR7dXNlcm5hbWV9LE9VPVVzdWFyaW9zLERDPXByb2plY3QtcmVkZXMsREM9bG9jYWxgOw0KDQogIGNsaWVudC5iaW5kKHVzZXJETiwgcGFzc3dvcmQsIChlcnIpID0+IHsNCiAgICBpZiAoZXJyKSB7DQogICAgICBjb25zb2xlLmVycm9yKCLinYwgRXJyb3IgZGUgYXV0ZW50aWNhY2nDs24gTERBUDoiLCBlcnIubWVzc2FnZSk7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiBmYWxzZSwNCiAgICAgICAgbWVzc2FnZTogIkNyZWRlbmNpYWxlcyBpbnbDoWxpZGFzIG8gY29uZXhpw7NuIGZhbGxpZGEiLA0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLy8gU2kgZWwgYmluZCBmdWUgZXhpdG9zbw0KICAgIGNvbnNvbGUubG9nKGDinIUgVXN1YXJpbyBhdXRlbnRpY2FkbzogJHt1c2VybmFtZX1gKTsNCiAgICBjbGllbnQudW5iaW5kKCk7DQogICAgcmV0dXJuIHJlcy5qc29uKHsNCiAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICBtZXNzYWdlOiAiQXV0ZW50aWNhY2nDs24gZXhpdG9zYSIsDQogICAgfSk7DQogIH0pOw0KfSk7DQoNCmFwcC5saXN0ZW4ocG9ydCwgIjAuMC4wLjAiLCAoKSA9PiB7DQogIGNvbnNvbGUubG9nKGDinIUgQVBJIExEQVAgZXNjdWNoYW5kbyBlbiBodHRwOi8vMC4wLjAuMDoke3BvcnR9YCk7DQp9KTsNCg==\" | base64 -d \u003e /var/www/api/login-api.js\n\n# Cambiar propietario para que node pueda ejecutar como ec2-user\nchown -R ec2-user:ec2-user /var/www/api\n\n# Instalar dependencias y ejecutar backend\nsudo -u ec2-user bash \u003c\u003c 'EOF'\ncd /var/www/api\nnpm init -y\nnpm install express body-parser cors ldapjs\nnohup node login-api.js \u003e output.log 2\u003e\u00261 \u0026\nEOF\n",
            "template": "#!/bin/bash\nyum update -y\nyum install -y httpd mod_ssl\n\n# Instalar Node.js y npm (versión 18 LTS)\ncurl -sL https://rpm.nodesource.com/setup_18.x | bash -\nyum install -y nodejs git\n\n# Activar y asegurar Apache\ncat \u003c\u003cEOF \u003e\u003e /etc/httpd/conf/httpd.conf\n\u003cDirectory /var/www/html\u003e\n    Options -Indexes\n\u003c/Directory\u003e\n\nHeader always set X-Frame-Options \"DENY\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nEOF\n\nsystemctl enable httpd\nsystemctl start httpd\n\n# Crear estructura de carpetas\nmkdir -p /var/www/html/css\nmkdir -p /var/www/html/js\nmkdir -p /var/www/api\n\n# Copiar frontend\necho \"${index_html}\" | base64 -d \u003e /var/www/html/index.html\necho \"${home_html}\"  | base64 -d \u003e /var/www/html/home.html\necho \"${style_css}\"  | base64 -d \u003e /var/www/html/css/style.css\necho \"${login_js}\"   | base64 -d \u003e /var/www/html/js/login.js\n\n# Copiar backend\necho \"${login_api}\" | base64 -d \u003e /var/www/api/login-api.js\n\n# Cambiar propietario para que node pueda ejecutar como ec2-user\nchown -R ec2-user:ec2-user /var/www/api\n\n# Instalar dependencias y ejecutar backend\nsudo -u ec2-user bash \u003c\u003c 'EOF'\ncd /var/www/api\nnpm init -y\nnpm install express body-parser cors ldapjs\nnohup node login-api.js \u003e output.log 2\u003e\u00261 \u0026\nEOF\n",
            "vars": {
              "home_html": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiIC8+DQogIDx0aXRsZT5Ib21lPC90aXRsZT4NCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3Mvc3R5bGUuY3NzIiAvPg0KPC9oZWFkPg0KPGJvZHk+DQogIDxkaXYgY2xhc3M9ImhvbWUtY29udGFpbmVyIj4NCiAgICA8aDE+QmllbnZlbmlkbzwvaDE+DQogICAgPHA+SGFzIGluaWNpYWRvIHNlc2nDs24gZXhpdG9zYW1lbnRlLjwvcD4NCiAgPC9kaXY+DQo8L2JvZHk+DQo8L2h0bWw+DQo=",
              "index_html": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KCTx0aXRsZT5TbGlkZSBOYXZiYXI8L3RpdGxlPg0KCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9zdHlsZS5jc3MiPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Kb3N0OndnaHRANTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCjwvaGVhZD4NCjxib2R5Pg0KCTxkaXYgY2xhc3M9Im1haW4iPiAgCQ0KCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjaGsiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCg0KCQkJPGRpdiBjbGFzcz0ic2lnbnVwIj4NCgkJCQk8Zm9ybT4NCgkJCQkJPGxhYmVsIGZvcj0iY2hrIiBhcmlhLWhpZGRlbj0idHJ1ZSI+U2lnbiB1cDwvbGFiZWw+DQoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2lnbnVwLXVzZXJuYW1lIiBwbGFjZWhvbGRlcj0iVXNlcm5hbWUiIHJlcXVpcmVkPg0KCQkJCQk8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJicm9qIiBwbGFjZWhvbGRlcj0iQnJvalRlbGVmb25hIiByZXF1aXJlZD0iIj4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwc3dkIiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiIHJlcXVpcmVkPSIiPg0KCQkJCQk8YnV0dG9uPlNpZ24gdXA8L2J1dHRvbj4NCgkJCQk8L2Zvcm0+DQoJCQk8L2Rpdj4NCg0KCQkJPGRpdiBjbGFzcz0ibG9naW4iPg0KCQkJCTxmb3JtIGlkPSJsb2dpbi1mb3JtIiBvbnN1Ym1pdD0icmV0dXJuIGZhbHNlOyI+DQoJCQkJCTxsYWJlbCBmb3I9ImNoayIgYXJpYS1oaWRkZW49InRydWUiPkxvZ2luPC9sYWJlbD4NCgkJCQkJPGlucHV0IHR5cGU9InRleHQiIGlkPSJsb2dpbi11c2VybmFtZSIgcGxhY2Vob2xkZXI9IlVzZXJuYW1lIiByZXF1aXJlZD4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBpZD0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJQYXNzd29yZCIgcmVxdWlyZWQ+DQoJCQkJCTxidXR0b24gdHlwZT0ic3VibWl0Ij5Mb2dpbjwvYnV0dG9uPg0KCQkJCQk8ZGl2IGlkPSJlcnJvci1tZXNzYWdlIj48L2Rpdj4NCgkJCQk8L2Zvcm0+DQoJCQkgIDwvZGl2Pg0KCQkJICANCgk8L2Rpdj4NCgk8c2NyaXB0IHNyYz0ianMvbG9naW4uanMiPjwvc2NyaXB0Pg0KDQo8L2JvZHk+DQo8L2h0bWw+",
              "login_api": "Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoImV4cHJlc3MiKTsNCmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCJib2R5LXBhcnNlciIpOw0KY29uc3QgY29ycyA9IHJlcXVpcmUoImNvcnMiKTsNCmNvbnN0IGxkYXAgPSByZXF1aXJlKCJsZGFwanMiKTsNCg0KY29uc3QgYXBwID0gZXhwcmVzcygpOw0KY29uc3QgcG9ydCA9IDMwMDA7DQoNCi8vIE1pZGRsZXdhcmUNCmFwcC51c2UoY29ycygpKTsNCmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpOw0KDQovLyBDb25maWd1cmFjacOzbiBMREFQIGNvbiBJUCBwcml2YWRhIGRlbCBBRA0KY29uc3QgbGRhcE9wdGlvbnMgPSB7DQogIHVybDogImxkYXA6Ly8xMC4wLjEuMTQ1IiwgLy8g4pyFIElQIHByaXZhZGEgcmVhbCBkZWwgc2Vydmlkb3IgQUQNCiAgcmVjb25uZWN0OiB0cnVlLA0KfTsNCg0KYXBwLnBvc3QoIi9hcGkvbG9naW4iLCBhc3luYyAocmVxLCByZXMpID0+IHsNCiAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5Ow0KDQogIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkKSB7DQogICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsNCiAgICAgIHN1Y2Nlc3M6IGZhbHNlLA0KICAgICAgbWVzc2FnZTogIkRhdG9zIGluY29tcGxldG9zIiwNCiAgICB9KTsNCiAgfQ0KDQogIGNvbnN0IGNsaWVudCA9IGxkYXAuY3JlYXRlQ2xpZW50KGxkYXBPcHRpb25zKTsNCg0KICAvLyBBcm1hZG8gZGVsIEROIGNvcnJlY3RvIChzZWfDum4gdHUgZXN0cnVjdHVyYSBlbiBBRCkNCiAgY29uc3QgdXNlckROID0gYENOPSR7dXNlcm5hbWV9LE9VPVVzdWFyaW9zLERDPXByb2plY3QtcmVkZXMsREM9bG9jYWxgOw0KDQogIGNsaWVudC5iaW5kKHVzZXJETiwgcGFzc3dvcmQsIChlcnIpID0+IHsNCiAgICBpZiAoZXJyKSB7DQogICAgICBjb25zb2xlLmVycm9yKCLinYwgRXJyb3IgZGUgYXV0ZW50aWNhY2nDs24gTERBUDoiLCBlcnIubWVzc2FnZSk7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiBmYWxzZSwNCiAgICAgICAgbWVzc2FnZTogIkNyZWRlbmNpYWxlcyBpbnbDoWxpZGFzIG8gY29uZXhpw7NuIGZhbGxpZGEiLA0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLy8gU2kgZWwgYmluZCBmdWUgZXhpdG9zbw0KICAgIGNvbnNvbGUubG9nKGDinIUgVXN1YXJpbyBhdXRlbnRpY2FkbzogJHt1c2VybmFtZX1gKTsNCiAgICBjbGllbnQudW5iaW5kKCk7DQogICAgcmV0dXJuIHJlcy5qc29uKHsNCiAgICAgIHN1Y2Nlc3M6IHRydWUsDQogICAgICBtZXNzYWdlOiAiQXV0ZW50aWNhY2nDs24gZXhpdG9zYSIsDQogICAgfSk7DQogIH0pOw0KfSk7DQoNCmFwcC5saXN0ZW4ocG9ydCwgIjAuMC4wLjAiLCAoKSA9PiB7DQogIGNvbnNvbGUubG9nKGDinIUgQVBJIExEQVAgZXNjdWNoYW5kbyBlbiBodHRwOi8vMC4wLjAuMDoke3BvcnR9YCk7DQp9KTsNCg==",
              "login_js": "ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgZG9jdW1lbnQNCiAgICAuZ2V0RWxlbWVudEJ5SWQoImxvZ2luLWZvcm0iKQ0KICAgIC5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBhc3luYyBmdW5jdGlvbiAoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KDQogICAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbi11c2VybmFtZSIpLnZhbHVlOw0KICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFzc3dvcmQiKS52YWx1ZTsNCg0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgNCiAgICAgICAgICBgaHR0cDovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTozMDAwL2FwaS9sb2dpbmAsDQogICAgICAgICAgew0KICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pLA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7DQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaG9tZS5odG1sIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAgICJDcmVkZW5jaWFsZXMgaW5jb3JyZWN0YXMuIjsNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6IiwgZXJyb3IpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAiRXJyb3IgYWwgY29uZWN0YXIgY29uIGVsIHNlcnZpZG9yLiI7DQogICAgICB9DQogICAgfSk7DQp9KTsNCg==",
              "style_css": "Ym9keXsNCgltYXJnaW46IDA7DQoJcGFkZGluZzogMDsNCglkaXNwbGF5OiBmbGV4Ow0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWFsaWduLWl0ZW1zOiBjZW50ZXI7DQoJbWluLWhlaWdodDogMTAwdmg7DQoJZm9udC1mYW1pbHk6ICdKb3N0Jywgc2Fucy1zZXJpZjsNCgliYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMGYwYzI5LCAjMzAyYjYzLCAjMjQyNDNlKTsNCn0NCi5tYWluew0KCXdpZHRoOiAzNTBweDsNCgloZWlnaHQ6IDUwMHB4Ow0KCWJhY2tncm91bmQ6IHJlZDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCWJhY2tncm91bmQ6IHVybCgiaHR0cHM6Ly9kb2MtMDgtMmMtZG9jcy5nb29nbGV1c2VyY29udGVudC5jb20vZG9jcy9zZWN1cmVzYy82OGM5MHNtaWdsaWhuZzk1MzRtdnFtcTE5NDZkbWlzNS9mbzBwaWNzcDFuaGl1Y21jMGwyNXMyOXJlc3BncHI0ai8xNjMxNTI0Mjc1MDAwLzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzFTeDBqaGRwRXBuTkl5ZFM0cm5ONGtIU0p0VTFFeVdrYT9lPXZpZXcmYXV0aHVzZXI9MCZub25jZT1nY3JvY2VwZ2JiMTdtJnVzZXI9MDM1MjIzNjA5NjA5MjIyOTgzNzQmaGFzaD10ZmhnYnM4NmthNmRpdm8zbGxidnA5M21nNGNzdmIzOCIpIG5vLXJlcGVhdCBjZW50ZXIvIGNvdmVyOw0KCWJvcmRlci1yYWRpdXM6IDEwcHg7DQoJYm94LXNoYWRvdzogNXB4IDIwcHggNTBweCAjMDAwOw0KfQ0KI2Noa3sNCglkaXNwbGF5OiBub25lOw0KfQ0KLnNpZ251cHsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJd2lkdGg6MTAwJTsNCgloZWlnaHQ6IDEwMCU7DQp9DQpsYWJlbHsNCgljb2xvcjogI2ZmZjsNCglmb250LXNpemU6IDIuM2VtOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiA1MHB4Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCWN1cnNvcjogcG9pbnRlcjsNCgl0cmFuc2l0aW9uOiAuNXMgZWFzZS1pbi1vdXQ7DQp9DQppbnB1dHsNCgl3aWR0aDogNjAlOw0KCWhlaWdodDogMTBweDsNCgliYWNrZ3JvdW5kOiAjZTBkZWRlOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiAyMHB4IGF1dG87DQoJcGFkZGluZzogMTJweDsNCglib3JkZXI6IG5vbmU7DQoJb3V0bGluZTogbm9uZTsNCglib3JkZXItcmFkaXVzOiA1cHg7DQp9DQpidXR0b257DQoJd2lkdGg6IDYwJTsNCgloZWlnaHQ6IDQwcHg7DQoJbWFyZ2luOiAxMHB4IGF1dG87DQoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoJZGlzcGxheTogYmxvY2s7DQoJY29sb3I6ICNmZmY7DQoJYmFja2dyb3VuZDogIzU3M2I4YTsNCglmb250LXNpemU6IDFlbTsNCglmb250LXdlaWdodDogYm9sZDsNCgltYXJnaW4tdG9wOiAzMHB4Ow0KCW91dGxpbmU6IG5vbmU7DQoJYm9yZGVyOiBub25lOw0KCWJvcmRlci1yYWRpdXM6IDVweDsNCgl0cmFuc2l0aW9uOiAuMnMgZWFzZS1pbjsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQpidXR0b246aG92ZXJ7DQoJYmFja2dyb3VuZDogIzZkNDRiODsNCn0NCi5sb2dpbnsNCgloZWlnaHQ6IDQ2MHB4Ow0KCWJhY2tncm91bmQ6ICNlZWU7DQoJYm9yZGVyLXJhZGl1czogNjAlIC8gMTAlOw0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTgwcHgpOw0KCXRyYW5zaXRpb246IC44cyBlYXNlLWluLW91dDsNCn0NCi5sb2dpbiBsYWJlbHsNCgljb2xvcjogIzU3M2I4YTsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg0KI2NoazpjaGVja2VkIH4gLmxvZ2luew0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAwcHgpOw0KfQ0KI2NoazpjaGVja2VkIH4gLmxvZ2luIGxhYmVsew0KCXRyYW5zZm9ybTogc2NhbGUoMSk7CQ0KfQ0KI2NoazpjaGVja2VkIH4gLnNpZ251cCBsYWJlbHsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg=="
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.web_server",
      "mode": "managed",
      "type": "aws_instance",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-076247d95990dec3e",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-03c58f937370c9972",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-03c58f937370c9972",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 2,
                "http_tokens": "required",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0e927cb8cc60a9f7a",
            "private_dns": "ip-10-0-1-242.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.242",
            "public_dns": "ec2-54-163-9-95.compute-1.amazonaws.com",
            "public_ip": "54.163.9.95",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 125,
                "volume_id": "vol-01e59551256d35421",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-016c2af89368c1ac8",
            "tags": {
              "Name": "web-server"
            },
            "tags_all": {
              "Name": "web-server"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "a4daaa06527f87913bfc7497372662b3136e9988",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0c17483b706a06057"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this",
            "module.web_server.aws_security_group.web_sg",
            "module.web_server.data.template_file.user_data"
          ]
        }
      ]
    },
    {
      "module": "module.web_server",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "web_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-0c17483b706a06057",
            "description": "Permite acceso HTTP (80) y SSH (22)",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0c17483b706a06057",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir HTTP",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir acceso al backend (Node.js) en puerto 3000",
                "from_port": 3000,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3000
              },
              {
                "cidr_blocks": [
                  "190.14.138.179/32"
                ],
                "description": "Permitir SSH desde IP del admin",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              }
            ],
            "name": "web-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "web-sg"
            },
            "tags_all": {
              "Name": "web-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0ff8a07940cf493db"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
