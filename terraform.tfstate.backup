{
  "version": 4,
  "terraform_version": "1.12.1",
  "serial": 2820,
  "lineage": "2f9759b4-ed16-78c6-b468-fe8b8fbda90d",
  "outputs": {
    "domain_controller_instance_id": {
      "value": "i-0d2bb30ca04daccea",
      "type": "string"
    },
    "domain_controller_private_ip": {
      "value": "10.0.2.145",
      "type": "string"
    },
    "domain_controller_public_ip": {
      "value": "54.242.175.245",
      "type": "string"
    },
    "ids_instance_id": {
      "value": "i-08847f914f7ee693a",
      "type": "string"
    },
    "ids_public_ip": {
      "value": "34.228.20.181",
      "type": "string"
    },
    "logs_bucket_name": {
      "value": "redes-static-site-e873b917-logs",
      "type": "string"
    },
    "nat_gateway_eip": {
      "value": "eipalloc-0189d78fe35f353ba",
      "type": "string"
    },
    "nat_gateway_id": {
      "value": "nat-0d14cad476b7a0780",
      "type": "string"
    },
    "private_subnet_id": {
      "value": "subnet-028583d4e81702c61",
      "type": "string"
    },
    "public_subnet_id": {
      "value": "subnet-0603648db186cd1e1",
      "type": "string"
    },
    "random_suffix": {
      "value": "e873b917",
      "type": "string"
    },
    "static_site_url": {
      "value": "redes-static-site-e873b917.s3-website.us-east-1.amazonaws.com",
      "type": "string"
    },
    "vns3_instance_id": {
      "value": "i-0c06466f10941757a",
      "type": "string"
    },
    "vns3_private_ip": {
      "value": "10.0.1.210",
      "type": "string"
    },
    "vns3_public_ip": {
      "value": "34.203.10.9",
      "type": "string"
    },
    "vns3_ui_url": {
      "value": "https://34.203.10.9:8000",
      "type": "string"
    },
    "vpc_id": {
      "value": "vpc-05906f367d7f87235",
      "type": "string"
    },
    "web_server_instance_id": {
      "value": "i-0abd6abbbb0abc6f5",
      "type": "string"
    },
    "web_server_public_ip": {
      "value": "98.80.12.167",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "random_id",
      "name": "suffix",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "b64_std": "6HO5Fw==",
            "b64_url": "6HO5Fw",
            "byte_length": 4,
            "dec": "3899898135",
            "hex": "e873b917",
            "id": "6HO5Fw",
            "keepers": null,
            "prefix": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.domain_controller",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "65cc77625bc58242927528cff050ec98a10bed2cb56e88d3dc02b2d63ff97f53",
            "rendered": "\u003cpowershell\u003e\n# ---------------------------------------------------\n# user_data.ps1 – Configuración de AD, DNS, SSM, RDP y usuarios\n# ---------------------------------------------------\n\n# 1) Instalar rol de Active Directory y DNS\nInstall-WindowsFeature -Name AD-Domain-Services, DNS -IncludeManagementTools\n\n# 2) Promover a Controlador de Dominio\nInstall-ADDSForest `\n  -DomainName \"project-redes.local\" `\n  -SafeModeAdministratorPassword (ConvertTo-SecureString \"Redes2023!\" -AsPlainText -Force) `\n  -Force\n\n# 3) Esperar reinicio\nStart-Sleep -Seconds 60\n\n# 4) Habilitar RDP\nSet-ItemProperty -Path \"HKLM:\\System\\CurrentControlSet\\Control\\Terminal Server\" -Name \"fDenyTSConnections\" -Value 0\nEnable-NetFirewallRule -DisplayGroup \"Remote Desktop\"\n\n# 5) Instalar AWS SSM Agent\nNew-Item -Path \"C:\\Temp\" -ItemType Directory -Force\n$ssmInstaller = \"https://s3.amazonaws.com/amazon-ssm-us-east-1/latest/windows_amd64/AmazonSSMAgentSetup.exe\"\nInvoke-WebRequest -Uri $ssmInstaller -OutFile \"C:\\Temp\\AmazonSSMAgentSetup.exe\"\nStart-Process -FilePath \"C:\\Temp\\AmazonSSMAgentSetup.exe\" -ArgumentList \"/qn\" -Wait\nStart-Service AmazonSSMAgent\nSet-Service -Name AmazonSSMAgent -StartupType Automatic\n\n# 6) Actualizar políticas y generar reporte\ngpupdate /force\ngpresult /H C:\\gp-report.html\n\n# 7) Descargar y ejecutar script de creación de usuarios\ntry {\n    Invoke-WebRequest -Uri \"https://tu-bucket-s3.s3.amazonaws.com/configuracion_ad.ps1\" -OutFile \"C:\\configuracion_ad.ps1\"\n    powershell.exe -ExecutionPolicy Bypass -File \"C:\\configuracion_ad.ps1\"\n} catch {\n    Write-Host \"⚠️ Error al ejecutar configuracion_ad.ps1: $_\"\n}\n\n\u003c/powershell\u003e\n",
            "template": "\u003cpowershell\u003e\n# ---------------------------------------------------\n# user_data.ps1 – Configuración de AD, DNS, SSM, RDP y usuarios\n# ---------------------------------------------------\n\n# 1) Instalar rol de Active Directory y DNS\nInstall-WindowsFeature -Name AD-Domain-Services, DNS -IncludeManagementTools\n\n# 2) Promover a Controlador de Dominio\nInstall-ADDSForest `\n  -DomainName \"${domain_name}\" `\n  -SafeModeAdministratorPassword (ConvertTo-SecureString \"${safe_mode_password}\" -AsPlainText -Force) `\n  -Force\n\n# 3) Esperar reinicio\nStart-Sleep -Seconds 60\n\n# 4) Habilitar RDP\nSet-ItemProperty -Path \"HKLM:\\System\\CurrentControlSet\\Control\\Terminal Server\" -Name \"fDenyTSConnections\" -Value 0\nEnable-NetFirewallRule -DisplayGroup \"Remote Desktop\"\n\n# 5) Instalar AWS SSM Agent\nNew-Item -Path \"C:\\Temp\" -ItemType Directory -Force\n$ssmInstaller = \"https://s3.amazonaws.com/amazon-ssm-us-east-1/latest/windows_amd64/AmazonSSMAgentSetup.exe\"\nInvoke-WebRequest -Uri $ssmInstaller -OutFile \"C:\\Temp\\AmazonSSMAgentSetup.exe\"\nStart-Process -FilePath \"C:\\Temp\\AmazonSSMAgentSetup.exe\" -ArgumentList \"/qn\" -Wait\nStart-Service AmazonSSMAgent\nSet-Service -Name AmazonSSMAgent -StartupType Automatic\n\n# 6) Actualizar políticas y generar reporte\ngpupdate /force\ngpresult /H C:\\gp-report.html\n\n# 7) Descargar y ejecutar script de creación de usuarios\ntry {\n    Invoke-WebRequest -Uri \"https://tu-bucket-s3.s3.amazonaws.com/configuracion_ad.ps1\" -OutFile \"C:\\configuracion_ad.ps1\"\n    powershell.exe -ExecutionPolicy Bypass -File \"C:\\configuracion_ad.ps1\"\n} catch {\n    Write-Host \"⚠️ Error al ejecutar configuracion_ad.ps1: $_\"\n}\n\n\u003c/powershell\u003e\n",
            "vars": {
              "domain_name": "project-redes.local",
              "safe_mode_password": "Redes2023!"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "vars"
              },
              {
                "type": "index",
                "value": {
                  "value": "safe_mode_password",
                  "type": "string"
                }
              }
            ]
          ],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.domain_controller",
      "mode": "managed",
      "type": "aws_instance",
      "name": "windows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-08e34c19a3a69e444",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-0d2bb30ca04daccea",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 2,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 2,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0d2bb30ca04daccea",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0367e09e71dbe9c20",
            "private_dns": "ip-10-0-2-145.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.2.145",
            "public_dns": "ec2-54-242-175-245.compute-1.amazonaws.com",
            "public_ip": "54.242.175.245",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-02c0046ac2e0d6dde",
                "volume_size": 30,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-028583d4e81702c61",
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "windows-domain-controller",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa",
              "Role": "AD-Server"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "windows-domain-controller",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa",
              "Role": "AD-Server"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "535b8894d9e14c6be50105a39367b7fe9b6f1731",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-041da995743f77be0"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.domain_controller.aws_security_group.win_sg",
            "module.domain_controller.data.template_file.user_data",
            "module.networking.aws_subnet.private",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.domain_controller",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "win_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-041da995743f77be0",
            "description": "RDP desde admin y LDAP/LDAPS/ICMP interna",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Todo trafico de salida",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-041da995743f77be0",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "LDAP interno",
                "from_port": 389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 389
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "LDAPS interno",
                "from_port": 636,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 636
              },
              {
                "cidr_blocks": [
                  "10.0.1.210/32"
                ],
                "description": "RDP desde VNS3 NAT",
                "from_port": 3389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3389
              },
              {
                "cidr_blocks": [
                  "10.0.3.0/24"
                ],
                "description": "Ping desde VPN",
                "from_port": -1,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "icmp",
                "security_groups": [],
                "self": false,
                "to_port": -1
              },
              {
                "cidr_blocks": [
                  "10.0.3.0/24"
                ],
                "description": "RDP desde VPN",
                "from_port": 3389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3389
              },
              {
                "cidr_blocks": [
                  "100.64.0.0/10"
                ],
                "description": "Ping desde 100.64.0.0/10",
                "from_port": -1,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "icmp",
                "security_groups": [],
                "self": false,
                "to_port": -1
              },
              {
                "cidr_blocks": [
                  "100.64.0.0/10"
                ],
                "description": "RDP desde 100.64.0.0/10",
                "from_port": 3389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3389
              },
              {
                "cidr_blocks": [
                  "190.14.138.134/32"
                ],
                "description": "RDP admin",
                "from_port": 3389,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3389
              }
            ],
            "name": "win-domain-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "win-domain-sg",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "win-domain-sg",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ids",
      "mode": "managed",
      "type": "aws_instance",
      "name": "ids",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-09579a0c7ceca4162",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-08847f914f7ee693a",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-08847f914f7ee693a",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0aa1846c1474dd23d",
            "private_dns": "ip-10-0-1-234.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.234",
            "public_dns": "ec2-34-228-20-181.compute-1.amazonaws.com",
            "public_ip": "34.228.20.181",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0e09ebf0b843d6212",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0603648db186cd1e1",
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "ids-server",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "ids-server",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "b15bddde7c3a364df2439df26b0a92332b7316c6",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-00bf38445d1f5161b"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ids.aws_security_group.ids_sg",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.ids",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ids_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-00bf38445d1f5161b",
            "description": "SSH solo desde admin y desde Firewall/VNS3",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir todo el trafico de salida",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-00bf38445d1f5161b",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.3.1/32"
                ],
                "description": "SSH desde Firewall/VNS3",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "190.14.138.134/32"
                ],
                "description": "SSH admin",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              }
            ],
            "name": "ids-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "ids-sg",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "ids-sg",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_eip",
      "name": "nat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-0189d78fe35f353ba",
            "associate_with_private_ip": null,
            "association_id": "",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-0189d78fe35f353ba",
            "instance": "",
            "network_border_group": "us-east-1",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-44-207-9-232.compute-1.amazonaws.com",
            "public_ip": "44.207.9.232",
            "public_ipv4_pool": "amazon",
            "tags": {
              "Name": "nat-eip"
            },
            "tags_all": {
              "Name": "nat-eip"
            },
            "timeouts": null,
            "vpc": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:internet-gateway/igw-09109d6591cf5e061",
            "id": "igw-09109d6591cf5e061",
            "owner_id": "809420506439",
            "tags": {
              "Name": "igw"
            },
            "tags_all": {
              "Name": "igw"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-0189d78fe35f353ba",
            "association_id": "eipassoc-0f79e7bcf337d3b35",
            "connectivity_type": "public",
            "id": "nat-0d14cad476b7a0780",
            "network_interface_id": "eni-09c8e9f5315d20d41",
            "private_ip": "10.0.1.118",
            "public_ip": "44.207.9.232",
            "subnet_id": "subnet-0603648db186cd1e1",
            "tags": {
              "Name": "nat-gateway"
            },
            "tags_all": {
              "Name": "nat-gateway"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_eip.nat",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl",
      "name": "private_nacl",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:network-acl/acl-0716a9889267c5b8f",
            "egress": [],
            "id": "acl-0716a9889267c5b8f",
            "ingress": [],
            "owner_id": "809420506439",
            "subnet_ids": [],
            "tags": {
              "Name": "private-nacl"
            },
            "tags_all": {
              "Name": "private-nacl"
            },
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl",
      "name": "public_nacl",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:network-acl/acl-0e8e45100e58c24d6",
            "egress": [],
            "id": "acl-0e8e45100e58c24d6",
            "ingress": [],
            "owner_id": "809420506439",
            "subnet_ids": [],
            "tags": {
              "Name": "public-nacl"
            },
            "tags_all": {
              "Name": "public-nacl"
            },
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_association",
      "name": "private_nacl_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aclassoc-0d29dd94bcbcdd301",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "subnet_id": "subnet-028583d4e81702c61"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.networking.aws_subnet.private",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_association",
      "name": "public_nacl_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "aclassoc-0f0de766345b505a0",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "subnet_id": "subnet-0603648db186cd1e1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_all_egress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "0.0.0.0/0",
            "egress": true,
            "from_port": null,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-1367899724",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "-1",
            "rule_action": "allow",
            "rule_number": 100,
            "to_port": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_ephemeral_in",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "10.0.0.0/16",
            "egress": false,
            "from_port": 1024,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-2052751148",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 130,
            "to_port": 65535
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_icmp_from_nat_range",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "100.64.0.0/10",
            "egress": false,
            "from_port": 8,
            "icmp_code": 0,
            "icmp_type": 0,
            "id": "nacl-845957270",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "1",
            "rule_action": "allow",
            "rule_number": 151,
            "to_port": -1
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_icmp_from_vpn",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "10.0.3.0/24",
            "egress": false,
            "from_port": 8,
            "icmp_code": 0,
            "icmp_type": 0,
            "id": "nacl-4091713366",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "1",
            "rule_action": "allow",
            "rule_number": 141,
            "to_port": -1
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_rdp",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "190.14.138.134/32",
            "egress": false,
            "from_port": 3389,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-3151274220",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 120,
            "to_port": 3389
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_rdp_from_nat_range",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "100.64.0.0/10",
            "egress": false,
            "from_port": 3389,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-2465183087",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 150,
            "to_port": 3389
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_rdp_from_vpn",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "10.0.3.0/24",
            "egress": false,
            "from_port": 3389,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-1398893231",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 140,
            "to_port": 3389
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "private_allow_vpc_ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "10.0.0.0/16",
            "egress": false,
            "from_port": null,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-3208645175",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0716a9889267c5b8f",
            "protocol": "-1",
            "rule_action": "allow",
            "rule_number": 110,
            "to_port": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.private_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_all_egress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "0.0.0.0/0",
            "egress": true,
            "from_port": null,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-3221459776",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "-1",
            "rule_action": "allow",
            "rule_number": 100,
            "to_port": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_ephemeral_in",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "0.0.0.0/0",
            "egress": false,
            "from_port": 1024,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-3956380192",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 130,
            "to_port": 65535
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "0.0.0.0/0",
            "egress": false,
            "from_port": 80,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-1916007457",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 100,
            "to_port": 80
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "0.0.0.0/0",
            "egress": false,
            "from_port": 443,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-3015519201",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 110,
            "to_port": 443
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_nodejs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "0.0.0.0/0",
            "egress": false,
            "from_port": 3000,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-710888928",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 120,
            "to_port": 3000
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_ssh",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "190.14.138.134/32",
            "egress": false,
            "from_port": 22,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-2484748133",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "6",
            "rule_action": "allow",
            "rule_number": 105,
            "to_port": 22
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_wireguard_in",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "190.14.138.134/32",
            "egress": false,
            "from_port": 51820,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-2220268577",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "17",
            "rule_action": "allow",
            "rule_number": 115,
            "to_port": 51820
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_network_acl_rule",
      "name": "public_allow_wireguard_out",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr_block": "190.14.138.134/32",
            "egress": true,
            "from_port": 51820,
            "icmp_code": null,
            "icmp_type": null,
            "id": "nacl-2764208726",
            "ipv6_cidr_block": "",
            "network_acl_id": "acl-0e8e45100e58c24d6",
            "protocol": "17",
            "rule_action": "allow",
            "rule_number": 115,
            "to_port": 51820
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.networking.aws_network_acl.public_nacl",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "private_rt",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:route-table/rtb-033a3ed8587b082ad",
            "id": "rtb-033a3ed8587b082ad",
            "owner_id": "809420506439",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "nat-0d14cad476b7a0780",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "private-rt"
            },
            "tags_all": {
              "Name": "private-rt"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_eip.nat",
            "module.networking.aws_nat_gateway.this",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public_rt",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:route-table/rtb-0858d9b75509ed0c4",
            "id": "rtb-0858d9b75509ed0c4",
            "owner_id": "809420506439",
            "propagating_vgws": [],
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-09109d6591cf5e061",
                "instance_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "public-rt"
            },
            "tags_all": {
              "Name": "public-rt"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_internet_gateway.this",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "private_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0d18de40f9e46862c",
            "route_table_id": "rtb-033a3ed8587b082ad",
            "subnet_id": "subnet-028583d4e81702c61",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_eip.nat",
            "module.networking.aws_nat_gateway.this",
            "module.networking.aws_route_table.private_rt",
            "module.networking.aws_subnet.private",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "public_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0e5b6e66d702b1ad1",
            "route_table_id": "rtb-0858d9b75509ed0c4",
            "subnet_id": "subnet-0603648db186cd1e1",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.networking.aws_internet_gateway.this",
            "module.networking.aws_route_table.public_rt",
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:subnet/subnet-028583d4e81702c61",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az4",
            "cidr_block": "10.0.2.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-028583d4e81702c61",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "809420506439",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "Name": "private-subnet"
            },
            "tags_all": {
              "Name": "private-subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.networking",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:subnet/subnet-0603648db186cd1e1",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az4",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0603648db186cd1e1",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "809420506439",
            "private_dns_hostname_type_on_launch": "ip-name",
            "tags": {
              "Name": "public-subnet"
            },
            "tags_all": {
              "Name": "public-subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::redes-static-site-e873b917-logs",
            "bucket": "redes-static-site-e873b917-logs",
            "bucket_domain_name": "redes-static-site-e873b917-logs.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "redes-static-site-e873b917-logs.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "f2185834d6192d28013c48cdcd20d01224dbf74972ac495ef87e076295e5188a",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "redes-static-site-e873b917-logs",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "redes-static-site-e873b917-logs",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "redes-static-site-e873b917-logs",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::redes-static-site-e873b917",
            "bucket": "redes-static-site-e873b917",
            "bucket_domain_name": "redes-static-site-e873b917.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "redes-static-site-e873b917.s3.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "f2185834d6192d28013c48cdcd20d01224dbf74972ac495ef87e076295e5188a",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "redes-static-site-e873b917",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "redes-static-site-e873b917",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "redes-static-site-e873b917",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_logging",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "redes-static-site-e873b917",
            "expected_bucket_owner": "",
            "id": "redes-static-site-e873b917",
            "target_bucket": "redes-static-site-e873b917-logs",
            "target_grant": [],
            "target_prefix": "access/"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.logs",
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "static_read",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "redes-static-site-e873b917",
            "id": "redes-static-site-e873b917",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:GetObject\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::redes-static-site-e873b917/*\"]}],\"Version\":\"2012-10-17\"}"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": false,
            "block_public_policy": false,
            "bucket": "redes-static-site-e873b917",
            "id": "redes-static-site-e873b917",
            "ignore_public_acls": false,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "redes-static-site-e873b917",
            "expected_bucket_owner": "",
            "id": "redes-static-site-e873b917",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket_website_configuration",
      "name": "static_site",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "redes-static-site-e873b917",
            "error_document": [
              {
                "key": "error.html"
              }
            ],
            "expected_bucket_owner": "",
            "id": "redes-static-site-e873b917",
            "index_document": [
              {
                "suffix": "index.html"
              }
            ],
            "redirect_all_requests_to": [],
            "routing_rule": [],
            "routing_rules": "",
            "website_domain": "s3-website-us-east-1.amazonaws.com",
            "website_endpoint": "redes-static-site-e873b917.s3-website-us-east-1.amazonaws.com"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "error",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "redes-static-site-e873b917",
            "bucket_key_enabled": false,
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "text/html",
            "etag": "4582f20750310ce4d25464df58146473",
            "force_destroy": false,
            "id": "error.html",
            "key": "error.html",
            "kms_key_id": null,
            "metadata": null,
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "AES256",
            "source": "modules/s3_static_site/error.html",
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": null,
            "tags_all": {},
            "version_id": "",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.static_site",
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "index",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "redes-static-site-e873b917",
            "bucket_key_enabled": false,
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "text/html",
            "etag": "7fe80c73382955d5692f049c7db402e9",
            "force_destroy": false,
            "id": "index.html",
            "key": "index.html",
            "kms_key_id": null,
            "metadata": null,
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "server_side_encryption": "AES256",
            "source": "modules/s3_static_site/index.html",
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": null,
            "tags_all": {},
            "version_id": "",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.static_site.aws_s3_bucket.static_site",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "module": "module.vns3_firewall",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "40eb2b22a1e3a30edc2f01e8376f3a854c6e18761a008b538fa3ede6153d1ddd",
            "rendered": "#!/bin/bash\nset -e\n\n# Actualizar e instalar SSH\napt-get update -y\napt-get install -y openssh-server\n\n# Habilitar SSH al arranque y encenderlo\nsystemctl enable ssh\nsystemctl start ssh\n",
            "template": "#!/bin/bash\nset -e\n\n# Actualizar e instalar SSH\napt-get update -y\napt-get install -y openssh-server\n\n# Habilitar SSH al arranque y encenderlo\nsystemctl enable ssh\nsystemctl start ssh\n",
            "vars": {
              "vpn_client_ip": "10.0.3.2",
              "vpn_server_ip": "10.0.3.1"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.vns3_firewall",
      "mode": "managed",
      "type": "aws_instance",
      "name": "vns3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0fb6fd20f553438e3",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-0c06466f10941757a",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0c06466f10941757a",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-0b8a888a4d3adb783",
            "private_dns": "ip-10-0-1-210.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.210",
            "public_dns": "ec2-34-203-10-9.compute-1.amazonaws.com",
            "public_ip": "34.203.10.9",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0bd0a7b36fd30bd41",
                "volume_size": 30,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0603648db186cd1e1",
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "vns3-server",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa",
              "Role": "vpn-firewall"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "vns3-server",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa",
              "Role": "vpn-firewall"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "518b3b2cd3e69e1589326d098009819cf0b25fe3",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-01d128193946da459"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.networking.aws_subnet.public",
            "module.vns3_firewall.aws_security_group.vns3_sg",
            "module.vns3_firewall.data.template_file.user_data",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vns3_firewall",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "vns3_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-01d128193946da459",
            "description": "VNS3 Web UI (8000), SSH (22) y WireGuard (51820)",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow all outbound",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-01d128193946da459",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.3.0/24"
                ],
                "description": "WireGuard VPN",
                "from_port": 51820,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "udp",
                "security_groups": [],
                "self": false,
                "to_port": 51820
              },
              {
                "cidr_blocks": [
                  "190.14.138.134/32"
                ],
                "description": "SSH admin",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "190.14.138.134/32"
                ],
                "description": "VNS3 Web UI",
                "from_port": 8000,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 8000
              },
              {
                "cidr_blocks": [
                  "190.14.138.134/32"
                ],
                "description": "WireGuard desde casa",
                "from_port": 51820,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "udp",
                "security_groups": [],
                "self": false,
                "to_port": 51820
              }
            ],
            "name": "vns3-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "vns3-sg",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa",
              "Role": "vpn-firewall"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "vns3-sg",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa",
              "Role": "vpn-firewall"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "vpc_flows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:809420506439:log-group:/aws/vpc/vpc-05906f367d7f87235/flowlogs",
            "id": "/aws/vpc/vpc-05906f367d7f87235/flowlogs",
            "kms_key_id": "",
            "name": "/aws/vpc/vpc-05906f367d7f87235/flowlogs",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_flow_log",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:vpc-flow-log/fl-0e8cde62aef086ba1",
            "deliver_cross_account_role": "",
            "destination_options": [],
            "eni_id": null,
            "iam_role_arn": "arn:aws:iam::809420506439:role/redesYa-vpc-flowlogs-role",
            "id": "fl-0e8cde62aef086ba1",
            "log_destination": "arn:aws:logs:us-east-1:809420506439:log-group:/aws/vpc/vpc-05906f367d7f87235/flowlogs",
            "log_destination_type": "cloud-watch-logs",
            "log_format": "${version} ${account-id} ${interface-id} ${srcaddr} ${dstaddr} ${srcport} ${dstport} ${protocol} ${packets} ${bytes} ${start} ${end} ${action} ${log-status}",
            "log_group_name": "/aws/vpc/vpc-05906f367d7f87235/flowlogs",
            "max_aggregation_interval": 600,
            "subnet_id": null,
            "tags": null,
            "tags_all": {},
            "traffic_type": "ALL",
            "transit_gateway_attachment_id": null,
            "transit_gateway_id": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_cloudwatch_log_group.vpc_flows",
            "module.vpc.aws_iam_role.vpc_flowlogs",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "vpc_flowlogs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::809420506439:role/redesYa-vpc-flowlogs-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"vpc-flow-logs.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-09T05:22:28Z",
            "description": "",
            "force_detach_policies": false,
            "id": "redesYa-vpc-flowlogs-role",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "redesYa-vpc-flowlogs-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "role_last_used": [
              {
                "last_used_date": "",
                "region": ""
              }
            ],
            "tags": null,
            "tags_all": {},
            "unique_id": "AROA3Y5JYYVDWZUMUVLLI"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "vpc_flowlogs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "redesYa-vpc-flowlogs-role:policy",
            "name": "policy",
            "name_prefix": null,
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"logs:PutLogEvents\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:us-east-1:809420506439:log-group:/aws/vpc/vpc-05906f367d7f87235/flowlogs\"}]}",
            "role": "redesYa-vpc-flowlogs-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_cloudwatch_log_group.vpc_flows",
            "module.vpc.aws_iam_role.vpc_flowlogs",
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:vpc/vpc-05906f367d7f87235",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-028889ee7f53b7fab",
            "default_route_table_id": "rtb-05cf6f1af4af7bb15",
            "default_security_group_id": "sg-061f1709c66a62948",
            "dhcp_options_id": "dopt-08203139ad7cafbe4",
            "enable_classiclink": false,
            "enable_classiclink_dns_support": false,
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "id": "vpc-05906f367d7f87235",
            "instance_tenancy": "default",
            "ipv4_ipam_pool_id": null,
            "ipv4_netmask_length": null,
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_network_border_group": "",
            "ipv6_ipam_pool_id": "",
            "ipv6_netmask_length": 0,
            "main_route_table_id": "rtb-05cf6f1af4af7bb15",
            "owner_id": "809420506439",
            "tags": {
              "CostCenter": "SECNET",
              "Env": "dev",
              "Name": "secure-vpc",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Env": "dev",
              "Name": "secure-vpc",
              "Owner": "Darwin Lopez ",
              "Project": "redesYa"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.web_server",
      "mode": "data",
      "type": "template_file",
      "name": "user_data",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "6d7a234fc7fdda2bde8b1992bef905efb817271105135573998b4285423e64ee",
            "rendered": "#!/bin/bash\nset -e\n\n# 📦 Actualizar sistema y herramientas necesarias\nyum update -y\nyum install -y httpd mod_ssl gcc-c++ make nodejs git certbot python3-certbot-apache\n\n# 🔐 Configurar cabeceras de seguridad en Apache\ncat \u003c\u003cEOF \u003e\u003e /etc/httpd/conf/httpd.conf\n\u003cDirectory /var/www/html\u003e\n    Options -Indexes\n\u003c/Directory\u003e\n\nHeader always set X-Frame-Options \"DENY\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nEOF\n\n# 🚀 Habilitar Apache\nsystemctl enable httpd\nsystemctl start httpd\n\n# 🗂️ Crear estructura de archivos\nmkdir -p /var/www/html/css\nmkdir -p /var/www/html/js\nmkdir -p /var/www/api\n\n# 📁 Instalar archivos frontend (HTML, CSS, JS)\necho \"PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KCTx0aXRsZT5TbGlkZSBOYXZiYXI8L3RpdGxlPg0KCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9zdHlsZS5jc3MiPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Kb3N0OndnaHRANTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCjwvaGVhZD4NCjxib2R5Pg0KCTxkaXYgY2xhc3M9Im1haW4iPiAgCQ0KCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjaGsiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCg0KCQkJPGRpdiBjbGFzcz0ic2lnbnVwIj4NCgkJCQk8Zm9ybT4NCgkJCQkJPGxhYmVsIGZvcj0iY2hrIiBhcmlhLWhpZGRlbj0idHJ1ZSI+U2lnbiB1cDwvbGFiZWw+DQoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2lnbnVwLXVzZXJuYW1lIiBwbGFjZWhvbGRlcj0iVXNlcm5hbWUiIHJlcXVpcmVkPg0KCQkJCQk8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJicm9qIiBwbGFjZWhvbGRlcj0iQnJvalRlbGVmb25hIiByZXF1aXJlZD0iIj4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwc3dkIiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiIHJlcXVpcmVkPSIiPg0KCQkJCQk8YnV0dG9uPlNpZ24gdXA8L2J1dHRvbj4NCgkJCQk8L2Zvcm0+DQoJCQk8L2Rpdj4NCg0KCQkJPGRpdiBjbGFzcz0ibG9naW4iPg0KCQkJCTxmb3JtIGlkPSJsb2dpbi1mb3JtIiBvbnN1Ym1pdD0icmV0dXJuIGZhbHNlOyI+DQoJCQkJCTxsYWJlbCBmb3I9ImNoayIgYXJpYS1oaWRkZW49InRydWUiPkxvZ2luPC9sYWJlbD4NCgkJCQkJPGlucHV0IHR5cGU9InRleHQiIGlkPSJsb2dpbi11c2VybmFtZSIgcGxhY2Vob2xkZXI9IlVzZXJuYW1lIiByZXF1aXJlZD4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBpZD0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJQYXNzd29yZCIgcmVxdWlyZWQ+DQoJCQkJCTxidXR0b24gdHlwZT0ic3VibWl0Ij5Mb2dpbjwvYnV0dG9uPg0KCQkJCQk8ZGl2IGlkPSJlcnJvci1tZXNzYWdlIj48L2Rpdj4NCgkJCQk8L2Zvcm0+DQoJCQkgIDwvZGl2Pg0KCQkJICANCgk8L2Rpdj4NCgk8c2NyaXB0IHNyYz0ianMvbG9naW4uanMiPjwvc2NyaXB0Pg0KDQo8L2JvZHk+DQo8L2h0bWw+\" | base64 -d \u003e /var/www/html/index.html\necho \"PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiIC8+DQogIDx0aXRsZT5Ib21lPC90aXRsZT4NCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3Mvc3R5bGUuY3NzIiAvPg0KPC9oZWFkPg0KPGJvZHk+DQogIDxkaXYgY2xhc3M9ImhvbWUtY29udGFpbmVyIj4NCiAgICA8aDE+QmllbnZlbmlkbzwvaDE+DQogICAgPHA+SGFzIGluaWNpYWRvIHNlc2lvbiBleGl0b3NhbWVudGUuPC9wPg0KICA8L2Rpdj4NCjwvYm9keT4NCjwvaHRtbD4NCg==\"  | base64 -d \u003e /var/www/html/home.html\necho \"Ym9keXsNCgltYXJnaW46IDA7DQoJcGFkZGluZzogMDsNCglkaXNwbGF5OiBmbGV4Ow0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWFsaWduLWl0ZW1zOiBjZW50ZXI7DQoJbWluLWhlaWdodDogMTAwdmg7DQoJZm9udC1mYW1pbHk6ICdKb3N0Jywgc2Fucy1zZXJpZjsNCgliYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMGYwYzI5LCAjMzAyYjYzLCAjMjQyNDNlKTsNCn0NCi5tYWluew0KCXdpZHRoOiAzNTBweDsNCgloZWlnaHQ6IDUwMHB4Ow0KCWJhY2tncm91bmQ6IHJlZDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCWJhY2tncm91bmQ6IHVybCgiaHR0cHM6Ly9kb2MtMDgtMmMtZG9jcy5nb29nbGV1c2VyY29udGVudC5jb20vZG9jcy9zZWN1cmVzYy82OGM5MHNtaWdsaWhuZzk1MzRtdnFtcTE5NDZkbWlzNS9mbzBwaWNzcDFuaGl1Y21jMGwyNXMyOXJlc3BncHI0ai8xNjMxNTI0Mjc1MDAwLzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzFTeDBqaGRwRXBuTkl5ZFM0cm5ONGtIU0p0VTFFeVdrYT9lPXZpZXcmYXV0aHVzZXI9MCZub25jZT1nY3JvY2VwZ2JiMTdtJnVzZXI9MDM1MjIzNjA5NjA5MjIyOTgzNzQmaGFzaD10ZmhnYnM4NmthNmRpdm8zbGxidnA5M21nNGNzdmIzOCIpIG5vLXJlcGVhdCBjZW50ZXIvIGNvdmVyOw0KCWJvcmRlci1yYWRpdXM6IDEwcHg7DQoJYm94LXNoYWRvdzogNXB4IDIwcHggNTBweCAjMDAwOw0KfQ0KI2Noa3sNCglkaXNwbGF5OiBub25lOw0KfQ0KLnNpZ251cHsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJd2lkdGg6MTAwJTsNCgloZWlnaHQ6IDEwMCU7DQp9DQpsYWJlbHsNCgljb2xvcjogI2ZmZjsNCglmb250LXNpemU6IDIuM2VtOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiA1MHB4Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCWN1cnNvcjogcG9pbnRlcjsNCgl0cmFuc2l0aW9uOiAuNXMgZWFzZS1pbi1vdXQ7DQp9DQppbnB1dHsNCgl3aWR0aDogNjAlOw0KCWhlaWdodDogMTBweDsNCgliYWNrZ3JvdW5kOiAjZTBkZWRlOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiAyMHB4IGF1dG87DQoJcGFkZGluZzogMTJweDsNCglib3JkZXI6IG5vbmU7DQoJb3V0bGluZTogbm9uZTsNCglib3JkZXItcmFkaXVzOiA1cHg7DQp9DQpidXR0b257DQoJd2lkdGg6IDYwJTsNCgloZWlnaHQ6IDQwcHg7DQoJbWFyZ2luOiAxMHB4IGF1dG87DQoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoJZGlzcGxheTogYmxvY2s7DQoJY29sb3I6ICNmZmY7DQoJYmFja2dyb3VuZDogIzU3M2I4YTsNCglmb250LXNpemU6IDFlbTsNCglmb250LXdlaWdodDogYm9sZDsNCgltYXJnaW4tdG9wOiAzMHB4Ow0KCW91dGxpbmU6IG5vbmU7DQoJYm9yZGVyOiBub25lOw0KCWJvcmRlci1yYWRpdXM6IDVweDsNCgl0cmFuc2l0aW9uOiAuMnMgZWFzZS1pbjsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQpidXR0b246aG92ZXJ7DQoJYmFja2dyb3VuZDogIzZkNDRiODsNCn0NCi5sb2dpbnsNCgloZWlnaHQ6IDQ2MHB4Ow0KCWJhY2tncm91bmQ6ICNlZWU7DQoJYm9yZGVyLXJhZGl1czogNjAlIC8gMTAlOw0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTgwcHgpOw0KCXRyYW5zaXRpb246IC44cyBlYXNlLWluLW91dDsNCn0NCi5sb2dpbiBsYWJlbHsNCgljb2xvcjogIzU3M2I4YTsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg0KI2NoazpjaGVja2VkIH4gLmxvZ2luew0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAwcHgpOw0KfQ0KI2NoazpjaGVja2VkIH4gLmxvZ2luIGxhYmVsew0KCXRyYW5zZm9ybTogc2NhbGUoMSk7CQ0KfQ0KI2NoazpjaGVja2VkIH4gLnNpZ251cCBsYWJlbHsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg==\"  | base64 -d \u003e /var/www/html/css/style.css\necho \"ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgZG9jdW1lbnQNCiAgICAuZ2V0RWxlbWVudEJ5SWQoImxvZ2luLWZvcm0iKQ0KICAgIC5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBhc3luYyBmdW5jdGlvbiAoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KDQogICAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbi11c2VybmFtZSIpLnZhbHVlOw0KICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFzc3dvcmQiKS52YWx1ZTsNCg0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgNCiAgICAgICAgICBgaHR0cDovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTozMDAwL2FwaS9sb2dpbmAsDQogICAgICAgICAgew0KICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pLA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7DQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaG9tZS5odG1sIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAgICJDcmVkZW5jaWFsZXMgaW5jb3JyZWN0YXMuIjsNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6IiwgZXJyb3IpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAiRXJyb3IgYWwgY29uZWN0YXIgY29uIGVsIHNlcnZpZG9yLiI7DQogICAgICB9DQogICAgfSk7DQp9KTsNCg==\"   | base64 -d \u003e /var/www/html/js/login.js\n\n# 📁 Instalar backend API\necho \"Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoImV4cHJlc3MiKTsNCmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCJib2R5LXBhcnNlciIpOw0KY29uc3QgY29ycyA9IHJlcXVpcmUoImNvcnMiKTsNCmNvbnN0IGxkYXAgPSByZXF1aXJlKCJsZGFwanMiKTsNCmNvbnN0IGh0dHBzID0gcmVxdWlyZSgiaHR0cHMiKTsNCmNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsNCmNvbnN0IHBhdGggPSByZXF1aXJlKCJwYXRoIik7DQoNCmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsNCmNvbnN0IHBvcnQgPSA0NDM7DQoNCi8vIENlcnRpZmljYWRvcyBTU0wgZGUgTGV0J3MgRW5jcnlwdA0KY29uc3Qgb3B0aW9ucyA9IHsNCiAga2V5OiBmcy5yZWFkRmlsZVN5bmMoIi9ldGMvbGV0c2VuY3J5cHQvbGl2ZS9yZWRlcy1wcm9qZWN0LmR1Y2tkbnMub3JnL3ByaXZrZXkucGVtIiksDQogIGNlcnQ6IGZzLnJlYWRGaWxlU3luYygiL2V0Yy9sZXRzZW5jcnlwdC9saXZlL3JlZGVzLXByb2plY3QuZHVja2Rucy5vcmcvZnVsbGNoYWluLnBlbSIpDQp9Ow0KDQovLyBNaWRkbGV3YXJlDQphcHAudXNlKGNvcnMoKSk7DQphcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTsNCmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoIi92YXIvd3d3L2h0bWwiKSk7IC8vIFNlcnZpciBhcmNoaXZvcyBlc3TDoXRpY29zDQoNCi8vIENvbmZpZ3VyYWNpw7NuIExEQVANCmNvbnN0IGxkYXBPcHRpb25zID0gew0KICB1cmw6ICJsZGFwOi8vMTAuMC4yLjE0NSIsDQogIHJlY29ubmVjdDogdHJ1ZSwNCn07DQoNCi8vIFJ1dGEgcHJpbmNpcGFsOiBzaXJ2ZSBpbmRleC5odG1sDQphcHAuZ2V0KCIvIiwgKHJlcSwgcmVzKSA9PiB7DQogIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oIi92YXIvd3d3L2h0bWwiLCAiaW5kZXguaHRtbCIpKTsNCn0pOw0KDQovLyBSdXRhIGRlIGxvZ2luDQphcHAucG9zdCgiL2FwaS9sb2dpbiIsIGFzeW5jIChyZXEsIHJlcykgPT4gew0KICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7DQoNCiAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHsNCiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oew0KICAgICAgc3VjY2VzczogZmFsc2UsDQogICAgICBtZXNzYWdlOiAiRGF0b3MgaW5jb21wbGV0b3MiLA0KICAgIH0pOw0KICB9DQoNCiAgY29uc3QgY2xpZW50ID0gbGRhcC5jcmVhdGVDbGllbnQobGRhcE9wdGlvbnMpOw0KICBjb25zdCB1c2VyUHJpbmNpcGFsTmFtZSA9IGAke3VzZXJuYW1lfUBwcm9qZWN0LXJlZGVzLmxvY2FsYDsNCg0KICBjbGllbnQuYmluZCh1c2VyUHJpbmNpcGFsTmFtZSwgcGFzc3dvcmQsIChlcnIpID0+IHsNCiAgICBpZiAoZXJyKSB7DQogICAgICBjb25zb2xlLmVycm9yKCLinYwgRmFsbG8gZGUgYXV0ZW50aWNhY2nDs24gTERBUDoiLCBlcnIubWVzc2FnZSk7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiBmYWxzZSwNCiAgICAgICAgbWVzc2FnZTogIkNyZWRlbmNpYWxlcyBpbnbDoWxpZGFzIG8gY29uZXhpw7NuIGZhbGxpZGEiLA0KICAgICAgfSk7DQogICAgfQ0KDQogICAgY29uc29sZS5sb2coYOKchSBVc3VhcmlvIGF1dGVudGljYWRvIGNvcnJlY3RhbWVudGU6ICR7dXNlclByaW5jaXBhbE5hbWV9YCk7DQogICAgY2xpZW50LnVuYmluZCgpOw0KDQogICAgLy8g4pyFIFJlZGlyaWdpciBhIGhvbWUuaHRtbCBkZXNkZSBiYWNrZW5kDQogICAgcmVzLmpzb24oew0KICAgICAgc3VjY2VzczogdHJ1ZSwNCiAgICAgIHJlZGlyZWN0OiAiL2hvbWUuaHRtbCIgLy8gZWwgZnJvbnRlbmQgcHVlZGUgdXNhciBlc3RvIHBhcmEgcmVkaXJpZ2lyDQogICAgfSk7DQogIH0pOw0KfSk7DQoNCi8vIFNlcnZpZG9yIEhUVFBTDQpodHRwcy5jcmVhdGVTZXJ2ZXIob3B0aW9ucywgYXBwKS5saXN0ZW4ocG9ydCwgKCkgPT4gew0KICBjb25zb2xlLmxvZyhg4pyFIEFQSSBMREFQIGNvcnJpZW5kbyBlbiBodHRwczovLzAuMC4wLjA6JHtwb3J0fWApOw0KfSk7DQo=\" | base64 -d \u003e /var/www/api/login-api.js\nchown -R ec2-user:ec2-user /var/www/api\n\n# 📦 Instalar dependencias Node.js como ec2-user\nsudo -u ec2-user bash \u003c\u003c 'EOF'\ncd /var/www/api\nnpm init -y\nnpm install express body-parser cors ldapjs\nEOF\n\n# ⚙️ Crear servicio systemd para login-api.js (HTTPS en puerto 443)\ncat \u003c\u003cEOT \u003e /etc/systemd/system/login-api.service\n[Unit]\nDescription=Node.js LDAP Login API\nAfter=network.target\n\n[Service]\nWorkingDirectory=/var/www/api\nExecStart=/usr/bin/node /var/www/api/login-api.js\nRestart=always\nUser=ec2-user\nEnvironment=NODE_ENV=production\n\n[Install]\nWantedBy=multi-user.target\nEOT\n\n# 🔁 Reiniciar systemd y activar servicio\nsystemctl daemon-reexec\nsystemctl daemon-reload\nsystemctl enable login-api.service\nsystemctl start login-api.service\n",
            "template": "#!/bin/bash\nset -e\n\n# 📦 Actualizar sistema y herramientas necesarias\nyum update -y\nyum install -y httpd mod_ssl gcc-c++ make nodejs git certbot python3-certbot-apache\n\n# 🔐 Configurar cabeceras de seguridad en Apache\ncat \u003c\u003cEOF \u003e\u003e /etc/httpd/conf/httpd.conf\n\u003cDirectory /var/www/html\u003e\n    Options -Indexes\n\u003c/Directory\u003e\n\nHeader always set X-Frame-Options \"DENY\"\nHeader always set X-Content-Type-Options \"nosniff\"\nHeader always set X-XSS-Protection \"1; mode=block\"\nEOF\n\n# 🚀 Habilitar Apache\nsystemctl enable httpd\nsystemctl start httpd\n\n# 🗂️ Crear estructura de archivos\nmkdir -p /var/www/html/css\nmkdir -p /var/www/html/js\nmkdir -p /var/www/api\n\n# 📁 Instalar archivos frontend (HTML, CSS, JS)\necho \"${index_html}\" | base64 -d \u003e /var/www/html/index.html\necho \"${home_html}\"  | base64 -d \u003e /var/www/html/home.html\necho \"${style_css}\"  | base64 -d \u003e /var/www/html/css/style.css\necho \"${login_js}\"   | base64 -d \u003e /var/www/html/js/login.js\n\n# 📁 Instalar backend API\necho \"${login_api}\" | base64 -d \u003e /var/www/api/login-api.js\nchown -R ec2-user:ec2-user /var/www/api\n\n# 📦 Instalar dependencias Node.js como ec2-user\nsudo -u ec2-user bash \u003c\u003c 'EOF'\ncd /var/www/api\nnpm init -y\nnpm install express body-parser cors ldapjs\nEOF\n\n# ⚙️ Crear servicio systemd para login-api.js (HTTPS en puerto 443)\ncat \u003c\u003cEOT \u003e /etc/systemd/system/login-api.service\n[Unit]\nDescription=Node.js LDAP Login API\nAfter=network.target\n\n[Service]\nWorkingDirectory=/var/www/api\nExecStart=/usr/bin/node /var/www/api/login-api.js\nRestart=always\nUser=ec2-user\nEnvironment=NODE_ENV=production\n\n[Install]\nWantedBy=multi-user.target\nEOT\n\n# 🔁 Reiniciar systemd y activar servicio\nsystemctl daemon-reexec\nsystemctl daemon-reload\nsystemctl enable login-api.service\nsystemctl start login-api.service\n",
            "vars": {
              "home_html": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlcyI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiIC8+DQogIDx0aXRsZT5Ib21lPC90aXRsZT4NCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3Mvc3R5bGUuY3NzIiAvPg0KPC9oZWFkPg0KPGJvZHk+DQogIDxkaXYgY2xhc3M9ImhvbWUtY29udGFpbmVyIj4NCiAgICA8aDE+QmllbnZlbmlkbzwvaDE+DQogICAgPHA+SGFzIGluaWNpYWRvIHNlc2lvbiBleGl0b3NhbWVudGUuPC9wPg0KICA8L2Rpdj4NCjwvYm9keT4NCjwvaHRtbD4NCg==",
              "index_html": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KCTx0aXRsZT5TbGlkZSBOYXZiYXI8L3RpdGxlPg0KCTxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9ImNzcy9zdHlsZS5jc3MiPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Kb3N0OndnaHRANTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCjwvaGVhZD4NCjxib2R5Pg0KCTxkaXYgY2xhc3M9Im1haW4iPiAgCQ0KCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjaGsiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCg0KCQkJPGRpdiBjbGFzcz0ic2lnbnVwIj4NCgkJCQk8Zm9ybT4NCgkJCQkJPGxhYmVsIGZvcj0iY2hrIiBhcmlhLWhpZGRlbj0idHJ1ZSI+U2lnbiB1cDwvbGFiZWw+DQoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2lnbnVwLXVzZXJuYW1lIiBwbGFjZWhvbGRlcj0iVXNlcm5hbWUiIHJlcXVpcmVkPg0KCQkJCQk8aW5wdXQgdHlwZT0ibnVtYmVyIiBuYW1lPSJicm9qIiBwbGFjZWhvbGRlcj0iQnJvalRlbGVmb25hIiByZXF1aXJlZD0iIj4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwc3dkIiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiIHJlcXVpcmVkPSIiPg0KCQkJCQk8YnV0dG9uPlNpZ24gdXA8L2J1dHRvbj4NCgkJCQk8L2Zvcm0+DQoJCQk8L2Rpdj4NCg0KCQkJPGRpdiBjbGFzcz0ibG9naW4iPg0KCQkJCTxmb3JtIGlkPSJsb2dpbi1mb3JtIiBvbnN1Ym1pdD0icmV0dXJuIGZhbHNlOyI+DQoJCQkJCTxsYWJlbCBmb3I9ImNoayIgYXJpYS1oaWRkZW49InRydWUiPkxvZ2luPC9sYWJlbD4NCgkJCQkJPGlucHV0IHR5cGU9InRleHQiIGlkPSJsb2dpbi11c2VybmFtZSIgcGxhY2Vob2xkZXI9IlVzZXJuYW1lIiByZXF1aXJlZD4NCgkJCQkJPGlucHV0IHR5cGU9InBhc3N3b3JkIiBpZD0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSJQYXNzd29yZCIgcmVxdWlyZWQ+DQoJCQkJCTxidXR0b24gdHlwZT0ic3VibWl0Ij5Mb2dpbjwvYnV0dG9uPg0KCQkJCQk8ZGl2IGlkPSJlcnJvci1tZXNzYWdlIj48L2Rpdj4NCgkJCQk8L2Zvcm0+DQoJCQkgIDwvZGl2Pg0KCQkJICANCgk8L2Rpdj4NCgk8c2NyaXB0IHNyYz0ianMvbG9naW4uanMiPjwvc2NyaXB0Pg0KDQo8L2JvZHk+DQo8L2h0bWw+",
              "login_api": "Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoImV4cHJlc3MiKTsNCmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCJib2R5LXBhcnNlciIpOw0KY29uc3QgY29ycyA9IHJlcXVpcmUoImNvcnMiKTsNCmNvbnN0IGxkYXAgPSByZXF1aXJlKCJsZGFwanMiKTsNCmNvbnN0IGh0dHBzID0gcmVxdWlyZSgiaHR0cHMiKTsNCmNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsNCmNvbnN0IHBhdGggPSByZXF1aXJlKCJwYXRoIik7DQoNCmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsNCmNvbnN0IHBvcnQgPSA0NDM7DQoNCi8vIENlcnRpZmljYWRvcyBTU0wgZGUgTGV0J3MgRW5jcnlwdA0KY29uc3Qgb3B0aW9ucyA9IHsNCiAga2V5OiBmcy5yZWFkRmlsZVN5bmMoIi9ldGMvbGV0c2VuY3J5cHQvbGl2ZS9yZWRlcy1wcm9qZWN0LmR1Y2tkbnMub3JnL3ByaXZrZXkucGVtIiksDQogIGNlcnQ6IGZzLnJlYWRGaWxlU3luYygiL2V0Yy9sZXRzZW5jcnlwdC9saXZlL3JlZGVzLXByb2plY3QuZHVja2Rucy5vcmcvZnVsbGNoYWluLnBlbSIpDQp9Ow0KDQovLyBNaWRkbGV3YXJlDQphcHAudXNlKGNvcnMoKSk7DQphcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTsNCmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoIi92YXIvd3d3L2h0bWwiKSk7IC8vIFNlcnZpciBhcmNoaXZvcyBlc3TDoXRpY29zDQoNCi8vIENvbmZpZ3VyYWNpw7NuIExEQVANCmNvbnN0IGxkYXBPcHRpb25zID0gew0KICB1cmw6ICJsZGFwOi8vMTAuMC4yLjE0NSIsDQogIHJlY29ubmVjdDogdHJ1ZSwNCn07DQoNCi8vIFJ1dGEgcHJpbmNpcGFsOiBzaXJ2ZSBpbmRleC5odG1sDQphcHAuZ2V0KCIvIiwgKHJlcSwgcmVzKSA9PiB7DQogIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oIi92YXIvd3d3L2h0bWwiLCAiaW5kZXguaHRtbCIpKTsNCn0pOw0KDQovLyBSdXRhIGRlIGxvZ2luDQphcHAucG9zdCgiL2FwaS9sb2dpbiIsIGFzeW5jIChyZXEsIHJlcykgPT4gew0KICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7DQoNCiAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHsNCiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oew0KICAgICAgc3VjY2VzczogZmFsc2UsDQogICAgICBtZXNzYWdlOiAiRGF0b3MgaW5jb21wbGV0b3MiLA0KICAgIH0pOw0KICB9DQoNCiAgY29uc3QgY2xpZW50ID0gbGRhcC5jcmVhdGVDbGllbnQobGRhcE9wdGlvbnMpOw0KICBjb25zdCB1c2VyUHJpbmNpcGFsTmFtZSA9IGAke3VzZXJuYW1lfUBwcm9qZWN0LXJlZGVzLmxvY2FsYDsNCg0KICBjbGllbnQuYmluZCh1c2VyUHJpbmNpcGFsTmFtZSwgcGFzc3dvcmQsIChlcnIpID0+IHsNCiAgICBpZiAoZXJyKSB7DQogICAgICBjb25zb2xlLmVycm9yKCLinYwgRmFsbG8gZGUgYXV0ZW50aWNhY2nDs24gTERBUDoiLCBlcnIubWVzc2FnZSk7DQogICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oew0KICAgICAgICBzdWNjZXNzOiBmYWxzZSwNCiAgICAgICAgbWVzc2FnZTogIkNyZWRlbmNpYWxlcyBpbnbDoWxpZGFzIG8gY29uZXhpw7NuIGZhbGxpZGEiLA0KICAgICAgfSk7DQogICAgfQ0KDQogICAgY29uc29sZS5sb2coYOKchSBVc3VhcmlvIGF1dGVudGljYWRvIGNvcnJlY3RhbWVudGU6ICR7dXNlclByaW5jaXBhbE5hbWV9YCk7DQogICAgY2xpZW50LnVuYmluZCgpOw0KDQogICAgLy8g4pyFIFJlZGlyaWdpciBhIGhvbWUuaHRtbCBkZXNkZSBiYWNrZW5kDQogICAgcmVzLmpzb24oew0KICAgICAgc3VjY2VzczogdHJ1ZSwNCiAgICAgIHJlZGlyZWN0OiAiL2hvbWUuaHRtbCIgLy8gZWwgZnJvbnRlbmQgcHVlZGUgdXNhciBlc3RvIHBhcmEgcmVkaXJpZ2lyDQogICAgfSk7DQogIH0pOw0KfSk7DQoNCi8vIFNlcnZpZG9yIEhUVFBTDQpodHRwcy5jcmVhdGVTZXJ2ZXIob3B0aW9ucywgYXBwKS5saXN0ZW4ocG9ydCwgKCkgPT4gew0KICBjb25zb2xlLmxvZyhg4pyFIEFQSSBMREFQIGNvcnJpZW5kbyBlbiBodHRwczovLzAuMC4wLjA6JHtwb3J0fWApOw0KfSk7DQo=",
              "login_js": "ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgZG9jdW1lbnQNCiAgICAuZ2V0RWxlbWVudEJ5SWQoImxvZ2luLWZvcm0iKQ0KICAgIC5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLCBhc3luYyBmdW5jdGlvbiAoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KDQogICAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2dpbi11c2VybmFtZSIpLnZhbHVlOw0KICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFzc3dvcmQiKS52YWx1ZTsNCg0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgNCiAgICAgICAgICBgaHR0cDovLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfTozMDAwL2FwaS9sb2dpbmAsDQogICAgICAgICAgew0KICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pLA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7DQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaG9tZS5odG1sIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAgICJDcmVkZW5jaWFsZXMgaW5jb3JyZWN0YXMuIjsNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6IiwgZXJyb3IpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXJyb3ItbWVzc2FnZSIpLnRleHRDb250ZW50ID0NCiAgICAgICAgICAiRXJyb3IgYWwgY29uZWN0YXIgY29uIGVsIHNlcnZpZG9yLiI7DQogICAgICB9DQogICAgfSk7DQp9KTsNCg==",
              "style_css": "Ym9keXsNCgltYXJnaW46IDA7DQoJcGFkZGluZzogMDsNCglkaXNwbGF5OiBmbGV4Ow0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWFsaWduLWl0ZW1zOiBjZW50ZXI7DQoJbWluLWhlaWdodDogMTAwdmg7DQoJZm9udC1mYW1pbHk6ICdKb3N0Jywgc2Fucy1zZXJpZjsNCgliYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMGYwYzI5LCAjMzAyYjYzLCAjMjQyNDNlKTsNCn0NCi5tYWluew0KCXdpZHRoOiAzNTBweDsNCgloZWlnaHQ6IDUwMHB4Ow0KCWJhY2tncm91bmQ6IHJlZDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCWJhY2tncm91bmQ6IHVybCgiaHR0cHM6Ly9kb2MtMDgtMmMtZG9jcy5nb29nbGV1c2VyY29udGVudC5jb20vZG9jcy9zZWN1cmVzYy82OGM5MHNtaWdsaWhuZzk1MzRtdnFtcTE5NDZkbWlzNS9mbzBwaWNzcDFuaGl1Y21jMGwyNXMyOXJlc3BncHI0ai8xNjMxNTI0Mjc1MDAwLzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzAzNTIyMzYwOTYwOTIyMjk4Mzc0LzFTeDBqaGRwRXBuTkl5ZFM0cm5ONGtIU0p0VTFFeVdrYT9lPXZpZXcmYXV0aHVzZXI9MCZub25jZT1nY3JvY2VwZ2JiMTdtJnVzZXI9MDM1MjIzNjA5NjA5MjIyOTgzNzQmaGFzaD10ZmhnYnM4NmthNmRpdm8zbGxidnA5M21nNGNzdmIzOCIpIG5vLXJlcGVhdCBjZW50ZXIvIGNvdmVyOw0KCWJvcmRlci1yYWRpdXM6IDEwcHg7DQoJYm94LXNoYWRvdzogNXB4IDIwcHggNTBweCAjMDAwOw0KfQ0KI2Noa3sNCglkaXNwbGF5OiBub25lOw0KfQ0KLnNpZ251cHsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJd2lkdGg6MTAwJTsNCgloZWlnaHQ6IDEwMCU7DQp9DQpsYWJlbHsNCgljb2xvcjogI2ZmZjsNCglmb250LXNpemU6IDIuM2VtOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiA1MHB4Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCWN1cnNvcjogcG9pbnRlcjsNCgl0cmFuc2l0aW9uOiAuNXMgZWFzZS1pbi1vdXQ7DQp9DQppbnB1dHsNCgl3aWR0aDogNjAlOw0KCWhlaWdodDogMTBweDsNCgliYWNrZ3JvdW5kOiAjZTBkZWRlOw0KCWp1c3RpZnktY29udGVudDogY2VudGVyOw0KCWRpc3BsYXk6IGZsZXg7DQoJbWFyZ2luOiAyMHB4IGF1dG87DQoJcGFkZGluZzogMTJweDsNCglib3JkZXI6IG5vbmU7DQoJb3V0bGluZTogbm9uZTsNCglib3JkZXItcmFkaXVzOiA1cHg7DQp9DQpidXR0b257DQoJd2lkdGg6IDYwJTsNCgloZWlnaHQ6IDQwcHg7DQoJbWFyZ2luOiAxMHB4IGF1dG87DQoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoJZGlzcGxheTogYmxvY2s7DQoJY29sb3I6ICNmZmY7DQoJYmFja2dyb3VuZDogIzU3M2I4YTsNCglmb250LXNpemU6IDFlbTsNCglmb250LXdlaWdodDogYm9sZDsNCgltYXJnaW4tdG9wOiAzMHB4Ow0KCW91dGxpbmU6IG5vbmU7DQoJYm9yZGVyOiBub25lOw0KCWJvcmRlci1yYWRpdXM6IDVweDsNCgl0cmFuc2l0aW9uOiAuMnMgZWFzZS1pbjsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQpidXR0b246aG92ZXJ7DQoJYmFja2dyb3VuZDogIzZkNDRiODsNCn0NCi5sb2dpbnsNCgloZWlnaHQ6IDQ2MHB4Ow0KCWJhY2tncm91bmQ6ICNlZWU7DQoJYm9yZGVyLXJhZGl1czogNjAlIC8gMTAlOw0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTgwcHgpOw0KCXRyYW5zaXRpb246IC44cyBlYXNlLWluLW91dDsNCn0NCi5sb2dpbiBsYWJlbHsNCgljb2xvcjogIzU3M2I4YTsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg0KI2NoazpjaGVja2VkIH4gLmxvZ2luew0KCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAwcHgpOw0KfQ0KI2NoazpjaGVja2VkIH4gLmxvZ2luIGxhYmVsew0KCXRyYW5zZm9ybTogc2NhbGUoMSk7CQ0KfQ0KI2NoazpjaGVja2VkIH4gLnNpZ251cCBsYWJlbHsNCgl0cmFuc2Zvcm06IHNjYWxlKC42KTsNCn0NCg=="
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.web_server",
      "mode": "managed",
      "type": "aws_instance",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-034ef5aff9ceafb77",
            "arn": "arn:aws:ec2:us-east-1:809420506439:instance/i-0abd6abbbb0abc6f5",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 1
              }
            ],
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0abd6abbbb0abc6f5",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "redes-key",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 2,
                "http_tokens": "required",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": 0,
            "primary_network_interface_id": "eni-03b32792519f02579",
            "private_dns": "ip-10-0-1-78.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.78",
            "public_dns": "ec2-98-80-12-167.compute-1.amazonaws.com",
            "public_ip": "98.80.12.167",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "throughput": 125,
                "volume_id": "vol-0eb96c779584f783a",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-0603648db186cd1e1",
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "web-server",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "web-server",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": null,
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0b34da31c9964f27f"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.networking.aws_subnet.public",
            "module.vpc.aws_vpc.this",
            "module.web_server.aws_security_group.web_sg"
          ]
        }
      ]
    },
    {
      "module": "module.web_server",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "web_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:809420506439:security-group/sg-0b34da31c9964f27f",
            "description": "Permite HTTP (80), Node.js (3000) y SSH (22)",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir todo el trafico de salida",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0b34da31c9964f27f",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir HTTP (80)",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir HTTPS (443)",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Permitir Node.js (3000)",
                "from_port": 3000,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3000
              },
              {
                "cidr_blocks": [
                  "190.14.138.134/32"
                ],
                "description": "Permitir SSH (22) solo desde administrador",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              }
            ],
            "name": "web-sg",
            "name_prefix": "",
            "owner_id": "809420506439",
            "revoke_rules_on_delete": false,
            "tags": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "web-sg",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "tags_all": {
              "CostCenter": "SECNET",
              "Departamento": "Infraestructura",
              "Env": "dev",
              "Environment": "dev",
              "Name": "web-sg",
              "Owner": "Darwin Lopez",
              "Project": "redesYa",
              "Proyecto": "redesYa"
            },
            "timeouts": null,
            "vpc_id": "vpc-05906f367d7f87235"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.this"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
